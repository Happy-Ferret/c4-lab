{"version":3,"sources":["webpack:///main.d6d0fbfe7a2c0e85db0e.js","webpack:///./src/header/index.js","webpack:///./src/viewer/index.js","webpack:///./src/header/about.component.js","webpack:///./src/core/codegen.ts","webpack:///./src/build-info/index.js","webpack:///./src/editor/index.js","webpack:///./src/help/index.js","webpack:///./src/preview/index.js","webpack:///./src/routes.js","webpack:///./src/shell/index.js","webpack:///./src/core/dot-writer.js","webpack:///./src/core/exporter.js","webpack:///./src/core/parse.js","webpack:///./src/editor/editor.component.js","webpack:///./src/header/importer.js","webpack:///./src/header/nav.component.js","webpack:///./src/index.js","webpack:///./src/preview/preview.component.js","webpack:///./src/shell/app.component.js","webpack:///./src/viewer/viewer.component.js","webpack:///./src/core/DataStore.ts","webpack:///./src/build-info/template.html","webpack:///./src/editor/editor.html","webpack:///./src/header/about.html","webpack:///./src/header/nav.html","webpack:///./src/help/help.html","webpack:///./src/preview/preview.html","webpack:///./src/shell/app.html","webpack:///./src/viewer/viewer.html","webpack:///./src/help/help.md","webpack:///./src/shell/c4lab.sexp","webpack:///./src/core/index.js"],"names":["webpackJsonp","121","module","exports","__webpack_require__","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","defineProperty","value","_angular","_angular2","_nav","nav","_about","about","component","name","options","122","angular","_viewer","viewer","150","undefined","_about2","template","bindings","close","151","toDataUrl","img","createElement","canvas","width","height","context","getContext","drawImage","toDataURL","toPngDataUri","uriDecode","uriEncode","toSvg","_lzString","lz","_viz","_viz2","dot","format","engine","text","compressToEncodedURIComponent","uriData","decompressFromEncodedURIComponent","svg","Promise","resolve","onload","setAttribute","encodeURIComponent","184","_classCallCheck","instance","Constructor","TypeError","_template","_template2","BuildInfoController","this","version","build","hash","controller","185","_editor","keys","forEach","enumerable","get","186","_interopRequireDefault","_help","_help2","_help3","_help4","HelpController","content","187","_preview","previewComponent","_header","_header2","_viewer2","188","configureRoutes","$stateProvider","$urlRouterProvider","otherwise","state","url","StateParamMirrorController","controllerAs","$stateParams","assign","189","_app","225","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","toDot","DotContext","_createClass","defineProperties","target","props","descriptor","configurable","writable","protoProps","staticProps","_wordwrap","_wordwrap2","_lodash","typeShapeMap","actor","container","hrefTo","indent","lines","wordwrap","graph","zoomNodeId","_this","visibleIds","findVisibleNodes","roots","sort","visibleEdges","edges","filter","x","isEdgeVisible","rootNode","idMap","parent","parentId","children","concat","map","id","uniq","nodeOrId","isString","indexOf","nodeOrText","htmlNewlines","arguments","description","wrapped","replace","edgeOrText","toDescription","edge","isIdVisible","sourceId","destinationId","isCrossingSystems","visibleSourceIds","findVisibleIds","sourceParentIds","visibleDestinationIds","destinationParentIds","ids","_this2","includes","style","dotId","toDotId","label","toLabel","nonClustered","DOT","b","drawItems","_this3","otherChildren","nextIndent","drawCluster","_this4","digraphHeaders","drawChildCluster","drawEdge","flattenDeep","join","regeneratorRuntime","mark","wrap","_context","prev","next","title","stop","font","nodesOrIds","_this5","type","drawItem","node","tech","toTechDescription","desc","shape","attrs","some","href","tooltip","u","attrList","_this6","srcOk","dstOk","getId","idOk","parentIds","find","srcId","dstId","src","dst","ltail","lhead","dir","getEdgeDirection","direction","color","Reflect","ownKeys","quoteAttr","test","ctx","load","draw","226","Exporter","formats","_codegen","split","document","e","downloadFile","then","dataUri","filename","contentType","a","download","click","227","_defineProperty","_toArray","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","canonicalize","keywordAliases","_ref","_ref2","to","parseKeywordArgs","kwargs","allowed","_kwargs","keyword","rest","slice","toString","parse","InvalidDirectionError","NameNotFoundError","OptsNotFoundError","TitleNotAtTopLevelError","TitleNotAStringError","ParseError","SyntaxError","pathToId","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","Symbol","iterator","done","push","err","_sExpression","_sExpression2","_md","_md2","_path","path","stripComments","_extendableBuiltin2","getPrototypeOf","apply","cls","ExtendableBuiltin","construct","Error","_ParseError","input","JSON","stringify","_ParseError2","_ParseError3","_ParseError4","_ParseError5","Parser","pathMap","items","tokens","buildIR","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","postProcessEdge","return","graphTitle","_this7","buildIRNode","_ref4","_ref5","item","canExpand","toLowerCase","_ref6","_ref7","opts","_opts","pathToNode","_ref8","_ref9","startsWith","findParentIds","228","install","$window","$log","debug","CodeMirror","_codemirror2","EditorController","_codemirror","_editor2","_core","log","editorOptions","lineNumbers","mode","theme","matchBrackets","autoCloseBrackets","initialText","lastError","parsed","ngModel","$setViewValue","syntaxIsValid","tryOnParse","error","onParse","require","229","readAllText","file","reader","FileReader","reject","loadEvt","result","onerror","readAsText","230","_nav2","_importer","aboutComponent","NavController","$state","$uibModal","storage","DataStore","localStorage","exportFormats","data","zoom","onExport","files","_onImport","open","save","go","reload","231","allowBlobsAndDataHrefs","$compileProvider","aHrefSanitizationWhitelist","editor","_shell","shell","_buildInfo","buildInfo","_routes","_routes2","_preview2","run","config","232","PreviewComponent","exporter","encodedText","export","233","AppController","_app2","_c4lab","_c4lab2","codeExpanded","234","ViewerComponent","$sce","trustAsHtml","diffs","_onGraphChanged","_nextState2","_nextState","_nextState3","params","_recalculateExpandableNodes","_hrefTo","current","_nextState4","_nextState5","expandableNodes","transclude","235","getItem","setItem","423","424","425","426","427","428","429","430","431","432","440","441","61","_parse","_DataStore","_exporter","_dotWriter"],"mappings":"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","file":"main.d6d0fbfe7a2c0e85db0e.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 121:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _angular = __webpack_require__(38);\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _nav = __webpack_require__(230);\n\nvar nav = _interopRequireWildcard(_nav);\n\nvar _about = __webpack_require__(150);\n\nvar about = _interopRequireWildcard(_about);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _angular2.default.module('c4-lab.header', ['ui.bootstrap', 'ui.router']).component(nav.name, nav.options).component(about.name, about.options).name;\n\n/***/ }),\n\n/***/ 122:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _angular = __webpack_require__(38);\n\nvar angular = _interopRequireWildcard(_angular);\n\n__webpack_require__(119);\n\n__webpack_require__(120);\n\nvar _viewer = __webpack_require__(234);\n\nvar viewer = _interopRequireWildcard(_viewer);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.default = angular.module('c4-lab.viewer', ['ui.bootstrap', 'ui.router']).component(viewer.name, viewer.options).name;\n\n/***/ }),\n\n/***/ 150:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.options = exports.name = undefined;\n\nvar _about = __webpack_require__(427);\n\nvar _about2 = _interopRequireDefault(_about);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar name = exports.name = \"c4LabAboutModal\";\nvar options = exports.options = {\n    template: _about2.default,\n    bindings: {\n        close: '&'\n    }\n};\n\n/***/ }),\n\n/***/ 151:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.toPngDataUri = exports.uriDecode = exports.uriEncode = exports.toSvg = undefined;\n\nvar _lzString = __webpack_require__(434);\n\nvar lz = _interopRequireWildcard(_lzString);\n\nvar _viz = __webpack_require__(444);\n\nvar _viz2 = _interopRequireDefault(_viz);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * convert a graph from DOT text to SVG\n */\nvar toSvg = exports.toSvg = function toSvg(dot) {\n    return (0, _viz2.default)(dot, { format: 'svg', engine: 'dot' });\n};\n/**\n * convert a text representation to an URI-encoded representation\n */\nvar uriEncode = exports.uriEncode = function uriEncode(text) {\n    return lz.compressToEncodedURIComponent(text);\n};\n/**\n * convert an URI-encoded representation to a text representation\n */\nvar uriDecode = exports.uriDecode = function uriDecode(uriData) {\n    return lz.decompressFromEncodedURIComponent(uriData);\n};\n/**\n * convert DOT text to a png-encoded data URI\n */\nvar toPngDataUri = exports.toPngDataUri = function toPngDataUri(dot, createElement) {\n    var svg = toSvg(dot);\n    var img = createElement('img');\n    return new Promise(function (resolve) {\n        img.onload = function () {\n            return resolve(toDataUrl(img, createElement));\n        };\n        img.setAttribute('src', 'data:image/svg+xml,' + encodeURIComponent(svg));\n    });\n};\nfunction toDataUrl(img, createElement) {\n    var canvas = createElement('canvas');\n    canvas.width = img.width;\n    canvas.height = img.height;\n    var context = canvas.getContext('2d');\n    if (context) {\n        context.drawImage(img, 0, 0);\n        var dataUrl = canvas.toDataURL('image/png');\n        return dataUrl;\n    }\n}\n\n/***/ }),\n\n/***/ 184:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.options = exports.name = undefined;\n\nvar _template = __webpack_require__(425);\n\nvar _template2 = _interopRequireDefault(_template);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BuildInfoController = function BuildInfoController() {\n    _classCallCheck(this, BuildInfoController);\n\n    /* global process */\n    this.version = \"0.32.1\";\n    this.build = \"90\" || 'SNAPSHOT';\n    this.hash = \"fe5615195fb1893ddc53635933e059327328f937\" || \"fe5615195fb1893ddc53635933e059327328f937\" || 'HEAD';\n};\n\nvar name = exports.name = 'c4LabBuildInfo';\nvar options = exports.options = {\n    template: _template2.default,\n    controller: BuildInfoController\n};\n\n/***/ }),\n\n/***/ 185:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _editor = __webpack_require__(228);\n\nObject.keys(_editor).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _editor[key];\n    }\n  });\n});\n\n/***/ }),\n\n/***/ 186:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _angular = __webpack_require__(38);\n\nvar angular = _interopRequireWildcard(_angular);\n\nvar _help = __webpack_require__(429);\n\nvar _help2 = _interopRequireDefault(_help);\n\nvar _help3 = __webpack_require__(440);\n\nvar _help4 = _interopRequireDefault(_help3);\n\n__webpack_require__(213);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar HelpController = function HelpController() {\n    _classCallCheck(this, HelpController);\n\n    this.content = _help4.default;\n};\n\nexports.default = angular.module('c4-lab.help', ['hc.marked']).component('c4LabHelp', {\n    template: _help2.default,\n    controller: HelpController\n}).name;\n\n/***/ }),\n\n/***/ 187:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _angular = __webpack_require__(38);\n\nvar angular = _interopRequireWildcard(_angular);\n\nvar _preview = __webpack_require__(232);\n\nvar previewComponent = _interopRequireWildcard(_preview);\n\nvar _header = __webpack_require__(121);\n\nvar _header2 = _interopRequireDefault(_header);\n\nvar _viewer = __webpack_require__(122);\n\nvar _viewer2 = _interopRequireDefault(_viewer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.default = angular.module('c4-lab.preview', [_header2.default, _viewer2.default]).component(previewComponent.name, previewComponent.options).name;\n\n/***/ }),\n\n/***/ 188:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar StateParamMirrorController = function StateParamMirrorController($stateParams) {\n  'ngInject';\n\n  _classCallCheck(this, StateParamMirrorController);\n\n  Object.assign(this, $stateParams);\n};\n\nfunction configureRoutes($stateProvider, $urlRouterProvider) {\n  'ngInject';\n\n  $urlRouterProvider.otherwise('/');\n  $stateProvider.state('home', {\n    url: '/?zoom',\n    template: '<c4-lab-app zoom=\"vm.zoom\"/>',\n    controller: StateParamMirrorController,\n    controllerAs: 'vm'\n  }).state('load', {\n    url: '/load/{data}?zoom',\n    template: '<c4-lab-preview encoded-text=\"vm.data\" zoom=\"vm.zoom\" />',\n    controller: StateParamMirrorController,\n    controllerAs: 'vm'\n  }).state('help', {\n    url: '/help',\n    template: '<c4-lab-help />'\n  });\n}\n\nexports.default = configureRoutes;\n\n/***/ }),\n\n/***/ 189:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _app = __webpack_require__(233);\n\nObject.keys(_app).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _app[key];\n    }\n  });\n});\n\n/***/ }),\n\n/***/ 225:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.toDot = exports.DotContext = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _wordwrap = __webpack_require__(446);\n\nvar _wordwrap2 = _interopRequireDefault(_wordwrap);\n\nvar _lodash = __webpack_require__(181);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DEFAULT_SHAPE = 'box';\nvar typeShapeMap = {\n    actor: 'egg',\n    container: 'box3d',\n    component: 'component'\n};\n\nvar DotContext = exports.DotContext = function () {\n    function DotContext(hrefTo) {\n        _classCallCheck(this, DotContext);\n\n        this.indent = '';\n        this.lines = [];\n        this.wordwrap = (0, _wordwrap2.default)(30);\n        this.hrefTo = hrefTo;\n    }\n\n    _createClass(DotContext, [{\n        key: 'load',\n        value: function load(graph, zoomNodeId) {\n            var _this = this;\n\n            this.graph = graph;\n            this.zoomNodeId = zoomNodeId;\n            this.visibleIds = zoomNodeId ? this.findVisibleNodes(zoomNodeId) : graph.roots;\n\n            this.visibleIds.sort();\n\n            this.visibleEdges = graph.edges.filter(function (x) {\n                return _this.isEdgeVisible(x);\n            });\n        }\n    }, {\n        key: 'findVisibleNodes',\n        value: function findVisibleNodes(zoomNodeId) {\n            this.rootNode = this.graph.idMap[zoomNodeId];\n            var parent = this.graph.idMap[this.rootNode.parentId];\n\n            var visibleIds = this.rootNode.children.concat(parent ? parent.children : []).map(function (x) {\n                return x.id;\n            }).concat(this.graph.roots).concat([this.rootNode.id, this.rootNode.parentId]).filter(function (x) {\n                return x;\n            });\n\n            return (0, _lodash.uniq)(visibleIds);\n        }\n    }, {\n        key: 'toDotId',\n        value: function toDotId(nodeOrId) {\n            var id = (0, _lodash.isString)(nodeOrId) ? nodeOrId : nodeOrId.id;\n\n            return 'g' + this.visibleIds.indexOf(id);\n        }\n    }, {\n        key: 'toDescription',\n        value: function toDescription(nodeOrText) {\n            var htmlNewlines = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n            var text = (0, _lodash.isString)(nodeOrText) ? nodeOrText : nodeOrText.description;\n\n            if (!text) return '';\n\n            var wrapped = this.wordwrap(text);\n\n            return htmlNewlines ? wrapped.replace(/\\n/g, '<br/>\\n') : wrapped;\n        }\n    }, {\n        key: 'toLabel',\n        value: function toLabel(edgeOrText) {\n            return this.toDescription(edgeOrText, false).replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n');\n        }\n    }, {\n        key: 'isEdgeVisible',\n        value: function isEdgeVisible(edge) {\n            return this.isIdVisible(edge.sourceId) || this.isIdVisible(edge.destinationId) || this.isCrossingSystems(edge);\n        }\n    }, {\n        key: 'isCrossingSystems',\n        value: function isCrossingSystems(edge) {\n            var visibleSourceIds = this.findVisibleIds(edge.sourceParentIds);\n            var visibleDestinationIds = this.findVisibleIds(edge.destinationParentIds);\n\n            return visibleSourceIds[0] !== visibleDestinationIds[0];\n        }\n    }, {\n        key: 'findVisibleIds',\n        value: function findVisibleIds(ids) {\n            var _this2 = this;\n\n            return ids.filter(function (x) {\n                return _this2.isIdVisible(x);\n            });\n        }\n    }, {\n        key: 'isIdVisible',\n        value: function isIdVisible(id) {\n            return this.visibleIds.includes(id);\n        }\n    }, {\n        key: 'drawCluster',\n        value: function drawCluster(indent, rootNode) {\n            var style = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"rounded\";\n\n            var dotId = this.toDotId(rootNode);\n            var label = this.toLabel(rootNode.name);\n\n            var nonClustered = this.graph.roots.filter(function (x) {\n                return x !== rootNode.id;\n            }).filter(function (x) {\n                return x !== rootNode.parentId;\n            });\n\n            return [indent + 'subgraph cluster_' + dotId + ' {\\n' + indent + '  label=<' + DOT.b(label) + '> style=\"' + style + '\"', '', indent + '  ' + dotId + ' [style=\"invisible\"]', '', this.drawItems(rootNode.children, indent + '  '), indent + '}', rootNode.parentId ? [] : this.drawItems(nonClustered, indent)];\n        }\n    }, {\n        key: 'drawChildCluster',\n        value: function drawChildCluster(indent) {\n            var _this3 = this;\n\n            var parent = this.graph.idMap[this.rootNode.parentId];\n            var dotId = this.toDotId(parent);\n            var label = this.toLabel(parent.name);\n\n            var nonClustered = this.graph.roots.filter(function (x) {\n                return x !== parent.id;\n            });\n            var otherChildren = parent.children.filter(function (x) {\n                return x !== _this3.rootNode;\n            });\n\n            var nextIndent = indent + '  ';\n\n            return [indent + 'subgraph cluster_' + dotId + ' {', nextIndent + 'label=<' + DOT.b(label) + '> style=\"rounded\"', '', '' + nextIndent + dotId + ' [style=\"invisible\"]', this.drawItems(otherChildren, nextIndent), '', this.drawCluster(nextIndent, this.rootNode, 'solid'), indent + '}', this.drawItems(nonClustered, indent)];\n        }\n    }, {\n        key: 'draw',\n        value: function draw() {\n            var _this4 = this;\n\n            var lines = ['digraph g {'].concat([].concat(_toConsumableArray(this.digraphHeaders('  ')))).concat([this.rootNode && this.rootNode.parentId ? this.drawChildCluster('  ') : this.rootNode ? this.drawCluster('  ', this.rootNode) : this.drawItems(this.visibleIds, '  '), '', this.visibleEdges.map(function (x) {\n                return _this4.drawEdge(x, '  ');\n            }), '}', '']);\n\n            return (0, _lodash.flattenDeep)(lines).join('\\n');\n        }\n    }, {\n        key: 'digraphHeaders',\n        value: regeneratorRuntime.mark(function digraphHeaders(indent) {\n            return regeneratorRuntime.wrap(function digraphHeaders$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            _context.next = 2;\n                            return indent + 'compound=true';\n\n                        case 2:\n                            if (!this.graph.title) {\n                                _context.next = 9;\n                                break;\n                            }\n\n                            _context.next = 5;\n                            return indent + 'label=\"' + this.toLabel(this.graph.title) + '\"';\n\n                        case 5:\n                            _context.next = 7;\n                            return indent + 'fontsize=20';\n\n                        case 7:\n                            _context.next = 9;\n                            return indent + 'labelloc=t';\n\n                        case 9:\n                            _context.next = 11;\n                            return indent + 'node[fontsize=12]';\n\n                        case 11:\n                            _context.next = 13;\n                            return indent + 'edge[fontsize=12]';\n\n                        case 13:\n                            _context.next = 15;\n                            return '';\n\n                        case 15:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, digraphHeaders, this);\n        })\n    }, {\n        key: 'toTechDescription',\n        value: function toTechDescription(text) {\n            if (!text) return '';\n\n            text = this.toDescription(text);\n            text = DOT.font(\"#666666\", DOT.i('&#171;' + text + '&#187;'));\n\n            return '\\n<br/>\\n' + text + '\\n<br/>';\n        }\n    }, {\n        key: 'drawItems',\n        value: function drawItems(nodesOrIds, indent) {\n            var _this5 = this;\n\n            return nodesOrIds.map(function (x) {\n                return (0, _lodash.isString)(x) ? _this5.graph.idMap[x] : x;\n            }).filter(function (x) {\n                return x.type !== 'edge';\n            }).map(function (x) {\n                return _this5.drawItem(x, indent);\n            });\n        }\n    }, {\n        key: 'drawItem',\n        value: function drawItem(node, indent) {\n            var dotId = this.toDotId(node);\n\n            var tech = this.toTechDescription(node.tech);\n\n            var desc = node.description ? '\\n<br/>\\n' + this.toDescription(node) : '';\n\n            var shape = typeShapeMap[node.type] || DEFAULT_SHAPE;\n\n            var attrs = {\n                shape: shape\n            };\n\n            var name = DOT.b(node.name);\n            if (this.hrefTo && node.children && node.children.some(function (x) {\n                return x.type !== 'edge';\n            })) {\n                attrs.href = this.hrefTo(node.id);\n                attrs.tooltip = 'See more details about ' + node.name;\n                name = DOT.font('blue', DOT.u(name));\n            }\n\n            attrs.label = '<\\n' + name + tech + desc + '\\n' + indent + '>';\n\n            return '' + indent + dotId + ' ' + DOT.attrList(attrs);\n        }\n    }, {\n        key: 'drawEdge',\n        value: function drawEdge(edge, indent) {\n            var _this6 = this;\n\n            var srcOk = this.isIdVisible(edge.sourceId);\n            var dstOk = this.isIdVisible(edge.destinationId);\n\n            var getId = function getId(idOk, id, parentIds) {\n                return idOk ? id : parentIds.find(function (x) {\n                    return _this6.isIdVisible(x);\n                });\n            };\n\n            var srcId = getId(srcOk, edge.sourceId, edge.sourceParentIds);\n            var dstId = getId(dstOk, edge.destinationId, edge.destinationParentIds);\n\n            var src = this.toDotId(srcId);\n            var dst = this.toDotId(dstId);\n\n            var attrs = {};\n\n            if (edge.description) {\n                attrs.label = this.toLabel(edge);\n            }\n\n            if (!(srcOk && dstOk)) {\n                attrs.style = 'dashed';\n            }\n\n            if (srcId === this.zoomNodeId) {\n                attrs.ltail = 'cluster_' + src;\n            }\n\n            if (dstId === this.zoomNodeId) {\n                attrs.lhead = 'cluster_' + dst;\n            }\n            attrs.dir = this.getEdgeDirection(edge.direction);\n\n            return '' + indent + src + ' -> ' + dst + ' ' + DOT.attrList(attrs);\n        }\n    }, {\n        key: 'getEdgeDirection',\n        value: function getEdgeDirection(direction) {\n            switch (direction) {\n                case \"both\":\n                    return \"both\";\n                case \"pull\":\n                    return \"back\";\n                default:\n                    return null;\n            }\n        }\n    }]);\n\n    return DotContext;\n}();\n\nvar DOT = function () {\n    function DOT() {\n        _classCallCheck(this, DOT);\n    }\n\n    _createClass(DOT, null, [{\n        key: 'i',\n        value: function i(text) {\n            return '<i>' + text + '</i>';\n        }\n    }, {\n        key: 'b',\n        value: function b(text) {\n            return '<b>' + text + '</b>';\n        }\n    }, {\n        key: 'u',\n        value: function u(text) {\n            return '<u>' + text + '</u>';\n        }\n    }, {\n        key: 'font',\n        value: function font(color, text) {\n            return '<font color=\"' + color + '\">' + text + '</font>';\n        }\n    }, {\n        key: 'attrList',\n        value: function attrList(attrs) {\n            var dotAttrs = Reflect.ownKeys(attrs).filter(function (x) {\n                return attrs[x];\n            }).map(function (x) {\n                return x + '=' + DOT.quoteAttr(attrs[x]);\n            }).join(' ');\n\n            return '[' + dotAttrs + ']';\n        }\n    }, {\n        key: 'quoteAttr',\n        value: function quoteAttr(value) {\n            return (/^</.test(value) ? value : '\"' + value + '\"'\n            );\n        }\n    }]);\n\n    return DOT;\n}();\n\n/**\n * build a DOT representation of the graph\n */\n\n\nvar toDot = exports.toDot = function toDot(graph, zoomNodeId, hrefTo) {\n    var ctx = new DotContext(hrefTo);\n    ctx.load(graph, zoomNodeId);\n    return ctx.draw();\n};\n\n/***/ }),\n\n/***/ 226:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Exporter = exports.formats = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _codegen = __webpack_require__(151);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar formats = exports.formats = 'sexp dot png'.split(' ');\n\nvar Exporter = function () {\n    function Exporter(document) {\n        _classCallCheck(this, Exporter);\n\n        this.createElement = function (e) {\n            return document.createElement(e);\n        };\n    }\n\n    _createClass(Exporter, [{\n        key: 'export',\n        value: function _export(format, title, text, dot) {\n            this[format](title || 'c4-lab-graph', text, dot);\n        }\n    }, {\n        key: 'sexp',\n        value: function sexp(title, text) {\n            this.downloadFile(title + '.sexp', text, 'text/plain');\n        }\n    }, {\n        key: 'dot',\n        value: function dot(title, text, _dot) {\n            this.downloadFile(title + '.dot', _dot, 'text/plain');\n        }\n    }, {\n        key: 'png',\n        value: function png(title, text, dot) {\n            var _this = this;\n\n            (0, _codegen.toPngDataUri)(dot, this.createElement).then(function (dataUri) {\n                return _this.downloadFile(title + '.png', dataUri);\n            });\n        }\n    }, {\n        key: 'downloadFile',\n        value: function downloadFile(filename, content) {\n            var contentType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n            var a = this.createElement('a');\n            a.download = filename;\n            if (contentType) {\n                a.href = 'data:' + contentType + ',' + encodeURIComponent(content);\n            } else {\n                a.href = content;\n            }\n            a.click();\n        }\n    }]);\n\n    return Exporter;\n}();\n\nexports.Exporter = Exporter;\n\n/***/ }),\n\n/***/ 227:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.parse = exports.InvalidDirectionError = exports.NameNotFoundError = exports.OptsNotFoundError = exports.TitleNotAtTopLevelError = exports.TitleNotAStringError = exports.ParseError = exports.SyntaxError = exports.pathToId = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _sExpression = __webpack_require__(443);\n\nvar _sExpression2 = _interopRequireDefault(_sExpression);\n\nvar _md = __webpack_require__(436);\n\nvar _md2 = _interopRequireDefault(_md);\n\nvar _lodash = __webpack_require__(181);\n\nvar _path = __webpack_require__(438);\n\nvar path = _interopRequireWildcard(_path);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toArray(arr) { return Array.isArray(arr) ? arr : Array.from(arr); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _extendableBuiltin(cls) {\n    function ExtendableBuiltin() {\n        var instance = Reflect.construct(cls, Array.from(arguments));\n        Object.setPrototypeOf(instance, Object.getPrototypeOf(this));\n        return instance;\n    }\n\n    ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n        constructor: {\n            value: cls,\n            enumerable: false,\n            writable: true,\n            configurable: true\n        }\n    });\n\n    if (Object.setPrototypeOf) {\n        Object.setPrototypeOf(ExtendableBuiltin, cls);\n    } else {\n        ExtendableBuiltin.__proto__ = cls;\n    }\n\n    return ExtendableBuiltin;\n}\n\nvar pathToId = exports.pathToId = _md2.default;\n\nvar stripComments = function stripComments(text) {\n    return text.replace(/^\\s*;;.*$/gm, ''\n    // SParse.SyntaxError is just an alias for Error, unfortunately\n    );\n};var SyntaxError = exports.SyntaxError = _sExpression2.default.SyntaxError;\n\nvar ParseError = exports.ParseError = function (_extendableBuiltin2) {\n    _inherits(ParseError, _extendableBuiltin2);\n\n    function ParseError() {\n        _classCallCheck(this, ParseError);\n\n        return _possibleConstructorReturn(this, (ParseError.__proto__ || Object.getPrototypeOf(ParseError)).apply(this, arguments));\n    }\n\n    return ParseError;\n}(_extendableBuiltin(Error));\n\nvar TitleNotAStringError = exports.TitleNotAStringError = function (_ParseError) {\n    _inherits(TitleNotAStringError, _ParseError);\n\n    function TitleNotAStringError(input) {\n        _classCallCheck(this, TitleNotAStringError);\n\n        return _possibleConstructorReturn(this, (TitleNotAStringError.__proto__ || Object.getPrototypeOf(TitleNotAStringError)).call(this, 'title must be a string, was: ' + JSON.stringify(input)));\n    }\n\n    return TitleNotAStringError;\n}(ParseError);\n\nvar TitleNotAtTopLevelError = exports.TitleNotAtTopLevelError = function (_ParseError2) {\n    _inherits(TitleNotAtTopLevelError, _ParseError2);\n\n    function TitleNotAtTopLevelError() {\n        _classCallCheck(this, TitleNotAtTopLevelError);\n\n        return _possibleConstructorReturn(this, (TitleNotAtTopLevelError.__proto__ || Object.getPrototypeOf(TitleNotAtTopLevelError)).call(this, 'title is only allowed at the top level'));\n    }\n\n    return TitleNotAtTopLevelError;\n}(ParseError);\n\nvar OptsNotFoundError = exports.OptsNotFoundError = function (_ParseError3) {\n    _inherits(OptsNotFoundError, _ParseError3);\n\n    function OptsNotFoundError(type) {\n        _classCallCheck(this, OptsNotFoundError);\n\n        return _possibleConstructorReturn(this, (OptsNotFoundError.__proto__ || Object.getPrototypeOf(OptsNotFoundError)).call(this, 'missing options for a ' + type));\n    }\n\n    return OptsNotFoundError;\n}(ParseError);\n\nvar NameNotFoundError = exports.NameNotFoundError = function (_ParseError4) {\n    _inherits(NameNotFoundError, _ParseError4);\n\n    function NameNotFoundError(type) {\n        _classCallCheck(this, NameNotFoundError);\n\n        return _possibleConstructorReturn(this, (NameNotFoundError.__proto__ || Object.getPrototypeOf(NameNotFoundError)).call(this, 'missing a name for a ' + type));\n    }\n\n    return NameNotFoundError;\n}(ParseError);\n\nvar InvalidDirectionError = exports.InvalidDirectionError = function (_ParseError5) {\n    _inherits(InvalidDirectionError, _ParseError5);\n\n    function InvalidDirectionError(dir) {\n        _classCallCheck(this, InvalidDirectionError);\n\n        return _possibleConstructorReturn(this, (InvalidDirectionError.__proto__ || Object.getPrototypeOf(InvalidDirectionError)).call(this, 'Unknown edge direction \"' + dir + '\". valid options are \"push\", \"pull\", or \"both\"'));\n    }\n\n    return InvalidDirectionError;\n}(ParseError);\n\nvar keywordAliases = [{ from: /^:desc.*/i, to: 'description' }, { from: /^:to/i, to: 'to' }, { from: /^:tech/i, to: 'tech' }, { from: /^:dir.*/i, to: 'direction' }];\n\nfunction canonicalize(key) {\n    return keywordAliases.filter(function (_ref) {\n        var from = _ref.from;\n        return from.test(key);\n    }).map(function (_ref2) {\n        var to = _ref2.to;\n        return to;\n    })[0] || key;\n}\n\nfunction parseKeywordArgs(kwargs) {\n    var allowed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : /.*/;\n\n    if (kwargs.length === 0) return {};\n\n    var _kwargs = _toArray(kwargs),\n        keyword = _kwargs[0],\n        value = _kwargs[1],\n        rest = _kwargs.slice(2);\n\n    var key = canonicalize(keyword);\n\n    return Object.assign(allowed.test(key) ? _defineProperty({}, key, value.toString()) : {}, parseKeywordArgs(rest, allowed));\n}\n\nvar Parser = function () {\n    function Parser() {\n        _classCallCheck(this, Parser);\n\n        this.idMap = {};\n        this.pathMap = {};\n        this.edges = [];\n        this.items = [];\n    }\n\n    _createClass(Parser, [{\n        key: 'parse',\n        value: function parse(text) {\n            var tokens = (0, _sExpression2.default)('(' + stripComments(text) + ')');\n            if (tokens instanceof _sExpression2.default.SyntaxError) {\n                throw tokens;\n            }\n            this.buildIR(tokens);\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = this.edges[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var e = _step.value;\n\n                    this.postProcessEdge(e);\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n\n            return {\n                title: this.graphTitle,\n                edges: this.edges,\n                items: this.items,\n                roots: this.items.filter(function (x) {\n                    return !x.parentId;\n                }).map(function (x) {\n                    return x.id;\n                }),\n                idMap: this.idMap,\n                pathMap: this.pathMap\n            };\n        }\n    }, {\n        key: 'buildIR',\n        value: function buildIR(tokens, parent) {\n            var _this7 = this;\n\n            return tokens.map(function (x) {\n                return _this7.buildIRNode(x, parent);\n            });\n        }\n    }, {\n        key: 'buildIRNode',\n        value: function buildIRNode(_ref4, parent) {\n            var _ref5 = _toArray(_ref4),\n                type = _ref5[0],\n                rest = _ref5.slice(1);\n\n            type = type.replace(/^def(ine)?-/i, '');\n            var node = type in this ? this[type](rest, parent) : this.item(rest, parent, type);\n\n            if (!node) return;\n\n            if (/system|container/i.test(type) && node.children.some(function (x) {\n                return x.type !== 'edge';\n            })) {\n                node.canExpand = true;\n            }\n            return Object.assign(node, { type: type.toLowerCase() });\n        }\n    }, {\n        key: 'item',\n        value: function item(_ref6, parent, type) {\n            var _ref7 = _toArray(_ref6),\n                opts = _ref7[0],\n                children = _ref7.slice(1);\n\n            if (!opts) {\n                throw new OptsNotFoundError(type);\n            }\n\n            var _opts = _toArray(opts),\n                name = _opts[0],\n                kwargs = _opts.slice(1);\n\n            if (!name) {\n                throw new NameNotFoundError(type);\n            }\n            var path = this.pathToNode(name, parent).toString();\n            var node = {\n                name: name.toString(),\n                id: pathToId(path),\n                path: path\n            };\n            if (parent) node.parentId = parent.id;\n            this.idMap[node.id] = node;\n            this.pathMap[node.path] = node.id;\n            Object.assign(node, parseKeywordArgs(kwargs, /description|tech/));\n            this.items.push(node);\n            node.children = this.buildIR(children, node);\n            return node;\n        }\n    }, {\n        key: 'edge',\n        value: function edge(input, parent) {\n            var edge = Object.assign({ sourceId: parent.id }, parseKeywordArgs(input, /description|to|tech|direction/));\n            this.edges.push(edge);\n            return edge;\n        }\n    }, {\n        key: 'title',\n        value: function title(_ref8, parent) {\n            var _ref9 = _slicedToArray(_ref8, 1),\n                input = _ref9[0];\n\n            if (!(0, _lodash.isString)(input)) {\n                throw new TitleNotAStringError(input);\n            }\n            if (parent) {\n                throw new TitleNotAtTopLevelError();\n            }\n            this.graphTitle = input.toString();\n        }\n    }, {\n        key: 'pathToNode',\n        value: function pathToNode(name, parent) {\n            return parent ? this.idMap[parent.id].path + '/' + name : name;\n        }\n    }, {\n        key: 'postProcessEdge',\n        value: function postProcessEdge(edge) {\n            if (edge.to.startsWith('.')) {\n                var src = this.idMap[edge.sourceId];\n                var parent = this.idMap[src.parentId];\n                edge.to = path.join(parent.path, edge.to);\n            }\n\n            edge.destinationId = this.pathMap[edge.to];\n\n            if (!edge.destinationId) {\n                throw new ParseError('Could not find node \\'' + edge.to + '\\'');\n            }\n            if (edge.sourceId === edge.destinationId) {\n                throw new ParseError('Edge cannot be both from and to \\'' + edge.to + '\\'');\n            }\n            if (edge.direction) {\n                if (/^(push|pull|both)$/i.test(edge.direction)) {\n                    edge.direction = edge.direction.toLowerCase();\n                } else {\n                    throw new InvalidDirectionError(edge.direction);\n                }\n            }\n\n            edge.id = pathToId(edge.sourceId + edge.destinationId);\n            edge.sourceParentIds = this.findParentIds(edge.sourceId);\n            edge.destinationParentIds = this.findParentIds(edge.destinationId);\n        }\n    }, {\n        key: 'findParentIds',\n        value: function findParentIds(id) {\n            var node = this.idMap[id];\n            if (!node.parentId) return [];\n\n            return [node.parentId].concat(this.findParentIds(node.parentId));\n        }\n    }]);\n\n    return Parser;\n}();\n\nvar parse = exports.parse = function parse(text) {\n    return new Parser().parse(text\n\n    /*\n    TODO: detect errors:\n    \n    * duplicate paths\n    \n    */\n    );\n};\n\n/***/ }),\n\n/***/ 228:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.options = exports.name = exports.EditorController = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.install = install;\n\n__webpack_require__(238);\n\n__webpack_require__(237);\n\n__webpack_require__(236);\n\n__webpack_require__(421);\n\n__webpack_require__(422);\n\nvar _codemirror = __webpack_require__(72);\n\nvar _codemirror2 = _interopRequireDefault(_codemirror);\n\nvar _editor = __webpack_require__(426);\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _core = __webpack_require__(61);\n\n__webpack_require__(423);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar EditorController = exports.EditorController = function () {\n    function EditorController($log) {\n        'ngInject';\n\n        _classCallCheck(this, EditorController);\n\n        this.log = $log;\n        this.editorOptions = {\n            lineNumbers: true,\n            mode: \"commonlisp\",\n            theme: \"elegant\",\n            matchBrackets: true,\n            autoCloseBrackets: true\n        };\n    }\n\n    _createClass(EditorController, [{\n        key: '$onInit',\n        value: function $onInit() {\n            this.parse(this.initialText);\n        }\n    }, {\n        key: 'parse',\n        value: function parse(text) {\n            this.lastError = undefined;\n            this.text = text;\n            try {\n                var parsed = (0, _core.parse)(text);\n                this.ngModel.$setViewValue(parsed);\n                this.syntaxIsValid = true;\n                this.tryOnParse(text);\n            } catch (e) {\n                this.log.error(e);\n                if (e instanceof _core.SyntaxError || e instanceof _core.ParseError) {\n                    this.syntaxIsValid = false;\n                    this.lastError = e;\n                }\n            }\n        }\n    }, {\n        key: 'tryOnParse',\n        value: function tryOnParse(text) {\n            if (!this.onParse) return;\n            try {\n                this.onParse({ text: text });\n            } catch (e) {\n                this.log.error('Trouble firing onParse event', e);\n            }\n        }\n    }]);\n\n    return EditorController;\n}();\n\nvar name = exports.name = \"c4LabEditor\";\nvar options = exports.options = {\n    require: {\n        ngModel: '^'\n    },\n    template: _editor2.default,\n    // TODO: use a custom validator tied to the parser\n    controller: EditorController,\n    bindings: {\n        initialText: '<',\n        onParse: '&'\n    }\n\n    // @ngInject\n};function install($window, $log) {\n    $log.debug('installing codemirror');\n    $window.CodeMirror = _codemirror2.default;\n}\n\n/***/ }),\n\n/***/ 229:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar readAllText = exports.readAllText = function readAllText(file) {\n    var reader = new FileReader();\n    return new Promise(function (resolve, reject) {\n        reader.onload = function (loadEvt) {\n            return resolve(loadEvt.target.result);\n        };\n        reader.onerror = reject;\n        reader.readAsText(file);\n    });\n};\n\n/***/ }),\n\n/***/ 230:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.options = exports.name = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _nav = __webpack_require__(428);\n\nvar _nav2 = _interopRequireDefault(_nav);\n\n__webpack_require__(424);\n\nvar _core = __webpack_require__(61);\n\nvar _importer = __webpack_require__(229);\n\nvar _about = __webpack_require__(150);\n\nvar aboutComponent = _interopRequireWildcard(_about);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar NavController = function () {\n    function NavController($state, $uibModal, $window) {\n        'ngInject';\n\n        _classCallCheck(this, NavController);\n\n        this.$state = $state;\n        this.$uibModal = $uibModal;\n        this.storage = new _core.DataStore($window.localStorage);\n        this.exportFormats = _core.formats;\n    }\n\n    _createClass(NavController, [{\n        key: 'href',\n        value: function href() {\n            return this.$state.href('load', {\n                data: (0, _core.uriEncode)(this.text),\n                zoom: this.zoom\n            });\n        }\n    }, {\n        key: 'export',\n        value: function _export(format) {\n            this.onExport({ format: format });\n        }\n    }, {\n        key: 'import',\n        value: function _import(files) {\n            var _this = this;\n\n            if (files) {\n                (0, _importer.readAllText)(files[0]).then(function (text) {\n                    return _this._onImport(text);\n                });\n            }\n        }\n    }, {\n        key: 'openAbout',\n        value: function openAbout() {\n            this.$uibModal.open({\n                component: aboutComponent.name\n            });\n        }\n    }, {\n        key: '_onImport',\n        value: function _onImport(text) {\n            this.storage.save(text);\n            this.$state.go('home', {}, { reload: true });\n        }\n    }]);\n\n    return NavController;\n}();\n\nvar name = exports.name = \"c4LabNav\";\nvar options = exports.options = {\n    template: _nav2.default,\n    controller: NavController,\n    bindings: {\n        text: '<',\n        onExport: '&',\n        zoom: '<'\n    }\n\n};\n\n/***/ }),\n\n/***/ 231:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _angular = __webpack_require__(38);\n\nvar angular = _interopRequireWildcard(_angular);\n\n__webpack_require__(190);\n\n__webpack_require__(183);\n\n__webpack_require__(119);\n\n__webpack_require__(120);\n\n__webpack_require__(182);\n\n__webpack_require__(191);\n\nvar _editor = __webpack_require__(185);\n\nvar editor = _interopRequireWildcard(_editor);\n\nvar _header = __webpack_require__(121);\n\nvar _header2 = _interopRequireDefault(_header);\n\nvar _shell = __webpack_require__(189);\n\nvar shell = _interopRequireWildcard(_shell);\n\nvar _buildInfo = __webpack_require__(184);\n\nvar buildInfo = _interopRequireWildcard(_buildInfo);\n\nvar _routes = __webpack_require__(188);\n\nvar _routes2 = _interopRequireDefault(_routes);\n\nvar _preview = __webpack_require__(187);\n\nvar _preview2 = _interopRequireDefault(_preview);\n\nvar _viewer = __webpack_require__(122);\n\nvar _viewer2 = _interopRequireDefault(_viewer);\n\nvar _help = __webpack_require__(186);\n\nvar _help2 = _interopRequireDefault(_help);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nangular.module('c4-lab', ['ui.codemirror', 'ui.bootstrap', 'ui.router', 'ngAnimate', 'ngFileUpload', _header2.default, _preview2.default, _viewer2.default, _help2.default]).component(buildInfo.name, buildInfo.options).component(editor.name, editor.options).component(shell.name, shell.options).run(editor.install).config(allowBlobsAndDataHrefs).config(_routes2.default\n\n// @ngInject\n);function allowBlobsAndDataHrefs($compileProvider) {\n  $compileProvider.aHrefSanitizationWhitelist(/^(https?|ftp|mailto|blob|data):/i);\n}\n\n/***/ }),\n\n/***/ 232:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.options = exports.name = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _preview = __webpack_require__(430);\n\nvar _preview2 = _interopRequireDefault(_preview);\n\nvar _core = __webpack_require__(61);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PreviewComponent = function () {\n    function PreviewComponent($window, $state) {\n        _classCallCheck(this, PreviewComponent);\n\n        this.exporter = new _core.Exporter($window.document);\n        this.storage = new _core.DataStore($window.localStorage);\n        this.$state = $state;\n    }\n\n    _createClass(PreviewComponent, [{\n        key: '$onChanges',\n        value: function $onChanges() {\n            this.text = (0, _core.uriDecode)(this.encodedText);\n            this.graph = (0, _core.parse)(this.text);\n        }\n    }, {\n        key: 'onExport',\n        value: function onExport(format) {\n            this.exporter.export(format, this.graph.title, this.text, this.dot);\n        }\n    }, {\n        key: 'edit',\n        value: function edit() {\n            this.storage.save(this.text);\n            this.$state.go('home');\n        }\n    }]);\n\n    return PreviewComponent;\n}();\n\nvar name = exports.name = 'c4LabPreview';\nvar options = exports.options = {\n    template: _preview2.default,\n    controller: PreviewComponent,\n    bindings: {\n        zoom: '<',\n        encodedText: '<'\n    }\n};\n\n/***/ }),\n\n/***/ 233:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.options = exports.name = exports.AppController = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _core = __webpack_require__(61);\n\nvar _app = __webpack_require__(431);\n\nvar _app2 = _interopRequireDefault(_app);\n\nvar _c4lab = __webpack_require__(441);\n\nvar _c4lab2 = _interopRequireDefault(_c4lab);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AppController = exports.AppController = function () {\n    function AppController($log, $window) {\n        'ngInject';\n\n        _classCallCheck(this, AppController);\n\n        this.log = $log;\n        this.$window = $window;\n        this.storage = new _core.DataStore($window.localStorage);\n        this.exporter = new _core.Exporter($window.document);\n        this.codeExpanded = true;\n    }\n\n    _createClass(AppController, [{\n        key: '$onInit',\n        value: function $onInit() {\n            this.initialText = this.storage.load() || _c4lab2.default;\n        }\n    }, {\n        key: 'onParse',\n        value: function onParse(text) {\n            this.log.debug('onParse');\n            this.text = text;\n            this.storage.save(text);\n        }\n    }, {\n        key: 'onExport',\n        value: function onExport(format) {\n            this.exporter.export(format, this.graph.title, this.text, this.dot);\n        }\n    }]);\n\n    return AppController;\n}();\n\nvar name = exports.name = \"c4LabApp\";\nvar options = exports.options = {\n    template: _app2.default,\n    controller: AppController,\n    bindings: {\n        zoom: '<'\n    }\n};\n\n/***/ }),\n\n/***/ 234:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.options = exports.name = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _viewer = __webpack_require__(432);\n\nvar _viewer2 = _interopRequireDefault(_viewer);\n\nvar _core = __webpack_require__(61);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ViewerComponent = function () {\n    function ViewerComponent($log, $sce, $state) {\n        'ngInject';\n\n        _classCallCheck(this, ViewerComponent);\n\n        this.$log = $log;\n        this.$state = $state;\n\n        this.toSvg = function (dot) {\n            return $sce.trustAsHtml((0, _core.toSvg)(dot));\n        };\n    }\n\n    _createClass(ViewerComponent, [{\n        key: '$onChanges',\n        value: function $onChanges(diffs) {\n            if (diffs.graph) this._onGraphChanged();\n        }\n    }, {\n        key: 'onZoom',\n        value: function onZoom() {\n            var _nextState2 = this._nextState(),\n                _nextState3 = _slicedToArray(_nextState2, 2),\n                name = _nextState3[0],\n                params = _nextState3[1];\n\n            return this.$state.go(name, params);\n        }\n    }, {\n        key: '_onGraphChanged',\n        value: function _onGraphChanged() {\n            var _this = this;\n\n            this.$log.debug('redrawing');\n            this._recalculateExpandableNodes();\n            this.dot = (0, _core.toDot)(this.graph, this.zoom, function (x) {\n                return _this._hrefTo(x);\n            });\n\n            this.svg = this.toSvg(this.dot);\n            this.ngModel.$setViewValue(this.dot);\n        }\n    }, {\n        key: '_nextState',\n        value: function _nextState() {\n            var zoom = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.zoom;\n\n            var name = this.$state.current.name;\n            var params = Object.assign({}, this.$state.params, { zoom: zoom });\n            return [name, params];\n        }\n    }, {\n        key: '_hrefTo',\n        value: function _hrefTo(zoom) {\n            var _nextState4 = this._nextState(zoom),\n                _nextState5 = _slicedToArray(_nextState4, 2),\n                name = _nextState5[0],\n                params = _nextState5[1];\n\n            return this.$state.href(name, params);\n        }\n    }, {\n        key: '_recalculateExpandableNodes',\n        value: function _recalculateExpandableNodes() {\n            this.expandableNodes = this.graph.items.filter(function (x) {\n                return x.canExpand;\n            }).sort(function (x) {\n                return x.path;\n            });\n        }\n    }]);\n\n    return ViewerComponent;\n}();\n\nvar name = exports.name = 'c4LabViewer';\nvar options = exports.options = {\n    require: {\n        ngModel: '^'\n    },\n    transclude: true,\n    template: _viewer2.default,\n    controller: ViewerComponent,\n    bindings: {\n        zoom: '<',\n        graph: '<'\n    }\n};\n\n/***/ }),\n\n/***/ 235:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LOCALSTORAGE_KEY = 'C4-LAB-ACTIVE-DOC-VNEXT';\n\nvar DataStore = exports.DataStore = function () {\n    function DataStore(localStorage) {\n        _classCallCheck(this, DataStore);\n\n        this.localStorage = localStorage;\n    }\n\n    _createClass(DataStore, [{\n        key: 'load',\n        value: function load() {\n            return this.localStorage.getItem(LOCALSTORAGE_KEY);\n        }\n    }, {\n        key: 'save',\n        value: function save(text) {\n            this.localStorage.setItem(LOCALSTORAGE_KEY, text);\n        }\n    }]);\n\n    return DataStore;\n}();\n\n/***/ }),\n\n/***/ 423:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 424:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 425:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<span class=\\\"text-muted small\\\" title=\\\"{{$ctrl.hash}}\\\">\\n  v{{$ctrl.version}}+{{$ctrl.build}}\\n</span>\\n\";\n\n/***/ }),\n\n/***/ 426:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div ng-class=\\\"{'bg-success': $ctrl.syntaxIsValid, 'bg-danger': !$ctrl.syntaxIsValid}\\\" style=\\\"padding: 0 1em;\\\">\\n    <ui-codemirror\\n        ui-codemirror-opts=\\\"$ctrl.editorOptions\\\"\\n        ng-model=\\\"$ctrl.text\\\"\\n        ng-model-options=\\\"{ debounce: 500 }\\\"\\n        ng-change=\\\"$ctrl.parse($ctrl.text)\\\">\\n    </ui-codemirror>\\n    <span class=\\\"help-block\\\">{{ $ctrl.lastError.message }}</span>\\n</div>\";\n\n/***/ }),\n\n/***/ 427:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"modal-header\\\">\\n    <h3 class=\\\"modal-title\\\" id=\\\"modal-title\\\">About</h3>\\n</div>\\n<div class=\\\"modal-body\\\" id=\\\"modal-body\\\">\\n    <p>C4 Lab helps to create diagrams expressing a software architecture using a small lisp-like language, and share those\\n        diagrams as images or text.\\n    </p>\\n    <p>\\n        This is a based on <a href=\\\"http://www.simonbrown.je/\\\">Simon Brown</a>'s <a href=\\\"http://www.codingthearchitecture.com/2014/08/24/c4_model_poster.html\\\">C4</a>        approach: Context, Containers, Components, and Classes. See <a href=\\\"https://leanpub.com/visualising-software-architecture\\\">Visualising Software Architecture</a>        for more information.\\n    </p>\\n    <p>\\n        If you have any feedback or problems, please open a <a href=\\\"https://github.com/ryepup/c4-lab/issues\\\">issue on github</a>.\\n    </p>\\n    <c4-lab-build-info></c4-lab-build-info>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <button class=\\\"btn btn-primary\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.close()\\\">Close</button>\\n</div>\";\n\n/***/ }),\n\n/***/ 428:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<nav class=\\\"navbar navbar-default\\\">\\n    <div class=\\\"container-fluid\\\">\\n        <div class=\\\"navbar-header\\\">\\n            <a class=\\\"navbar-brand\\\" href=\\\"#\\\">C4 Lab</a>\\n        </div>\\n\\n        <p class=\\\"navbar-text navbar-right c4lab-build\\\">\\n            <c4-lab-build-info></c4-lab-build-info>\\n        </p>\\n\\n        <div class=\\\"navbar-collapse collapse\\\">\\n            <ul class=\\\"nav navbar-nav\\\">\\n                <li>\\n                    <a popover-placement=\\\"bottom\\\" uib-popover-template=\\\"'_share.html'\\\">\\n                        <span class=\\\"glyphicon glyphicon-duplicate\\\"> </span> Share\\n                    </a>\\n                </li>\\n                <li>\\n                    <a ngf-select=\\\"$ctrl.import($files)\\\" ngf-pattern=\\\"'.sexp'\\\" ngf-accept=\\\"'.sexp'\\\">\\n                        <span class=\\\"glyphicon glyphicon-open-file\\\"> </span> Import\\n                    </a>\\n                </li>\\n                <li class=\\\"dropdown\\\" uib-dropdown>\\n                    <a uib-dropdown-toggle>\\n                        <span class=\\\"glyphicon glyphicon-picture\\\"> </span> Export <span class=\\\"caret\\\"></span>\\n                    </a>\\n                    <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n                        <li ng-repeat=\\\"format in $ctrl.exportFormats\\\">\\n                            <a ng-click=\\\"$ctrl.export(format)\\\">{{format}}</a>\\n                        </li>\\n                    </ul>\\n                </li>\\n                <li>\\n                    <a href=\\\"#\\\" ng-click=\\\"$ctrl.openAbout()\\\">\\n                        <span class=\\\"glyphicon glyphicon-info-sign\\\"> </span> About\\n                    </a>\\n                </li>\\n                <li>\\n                    <a ui-sref=\\\"help\\\">\\n                        <span class=\\\"glyphicon glyphicon-question-sign\\\"> </span> Help\\n                    </a>\\n                </li>\\n            </ul>\\n        </div>\\n    </div>\\n</nav>\\n\\n<script type=\\\"text/ng-template\\\" id=\\\"_share.html\\\">\\n    <div style=\\\"width:10em;\\\">\\n        <a ng-href=\\\"{{$ctrl.href()}}\\\" target=\\\"_blank\\\">\\n            <span class=\\\"glyphicon glyphicon-new-window\\\" > </span>\\n            Link to this page</a>\\n    </div>\\n</script>\";\n\n/***/ }),\n\n/***/ 429:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<c4-lab-nav></c4-lab-nav>\\n<div marked=\\\"$ctrl.content\\\"></div>\";\n\n/***/ }),\n\n/***/ 430:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<c4-lab-nav text=\\\"$ctrl.text\\\" on-export=\\\"$ctrl.onExport(format)\\\" zoom=\\\"$ctrl.zoom\\\"></c4-lab-nav>\\n<c4-lab-viewer graph=\\\"$ctrl.graph\\\" zoom=\\\"$ctrl.zoom\\\" ng-model=\\\"$ctrl.dot\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary hidden-xs hidden-sm\\\" ng-click=\\\"$ctrl.edit()\\\">Start editing this graph</button>\\n</c4-lab-viewer>\";\n\n/***/ }),\n\n/***/ 431:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<c4-lab-nav text=\\\"$ctrl.text\\\" on-export=\\\"$ctrl.onExport(format)\\\" zoom=\\\"$ctrl.zoom\\\"></c4-lab-nav>\\n<div class=\\\"container-fluid\\\">\\n    <div class=\\\"row\\\">\\n        <div ng-class=\\\"$ctrl.codeExpanded ? 'col-md-6' : 'col-md-4'\\\">\\n            <c4-lab-editor ng-model=\\\"$ctrl.graph\\\" initial-text=\\\"$ctrl.initialText\\\" on-parse=\\\"$ctrl.onParse(text)\\\"></c4-lab-editor>\\n\\n            <button class=\\\"btn btn-default btn-block\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.codeExpanded = !$ctrl.codeExpanded\\\">\\n                <span class=\\\"glyphicon\\\"\\n                    ng-class=\\\"$ctrl.codeExpanded ? 'glyphicon-chevron-left' : 'glyphicon-chevron-right'\\\"></span> \\n                    Show {{$ctrl.codeExpanded ? 'less' : 'more'}} code\\n            </button>\\n        </div>\\n        <div ng-class=\\\"$ctrl.codeExpanded ? 'col-md-6' : 'col-md-8'\\\">\\n            <c4-lab-viewer graph=\\\"$ctrl.graph\\\" zoom=\\\"$ctrl.zoom\\\" ng-model=\\\"$ctrl.dot\\\">\\n            </c4-lab-viewer>\\n        </div>\\n    </div>\\n</div>\";\n\n/***/ }),\n\n/***/ 432:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div>\\n    <form class=\\\"form-inline\\\">\\n        <div class=\\\"form-group\\\">\\n            <label for=\\\"zoomableNodes\\\">Zoom to node</label>\\n            <select name=\\\"zoomableNodes\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.zoom\\\" ng-change=\\\"$ctrl.onZoom()\\\">\\n                <option ng-value=\\\"undefined\\\">--none--</option>\\n                <option ng-repeat=\\\"node in $ctrl.expandableNodes track by node.id\\\"\\n                    value=\\\"{{node.id}}\\\">{{node.path}}</option>\\n            </select>\\n        </div>\\n        <div class=\\\"form-group\\\" ng-transclude>\\n        </div>\\n    </form>\\n    <uib-tabset>\\n        <uib-tab heading=\\\"svg\\\">\\n            <div ng-bind-html=\\\"$ctrl.svg\\\"></div>'\\n        </uib-tab>\\n        <uib-tab heading=\\\"dot\\\">\\n            <p>This is for debugging purposes</p>\\n            <!-- TODO: a disabled text area -->\\n            <pre>{{$ctrl.dot}}</pre>\\n        </uib-tab>\\n    </uib-tabset>\\n    <div>\";\n\n/***/ }),\n\n/***/ 440:\n/***/ (function(module, exports) {\n\nmodule.exports = \"# C4-Lab Help\\n\\nC4-Lab defines a domain specific language (DSL) for creating software\\narchitectures, modeled heavily after [Simon Brown][SB]'s [C4][] approach\\n(Context, Containers, Components, and Classes). See [Visualising Software\\nArchitecture][] for more information.\\n\\n[SB]: http://www.simonbrown.je/\\n[C4]: http://www.codingthearchitecture.com/2014/08/24/c4_model_poster.html\\n[Visualising Software Architecture]: https://leanpub.com/visualising-software-architecture\\n\\n## Features\\n\\nC4-Lab has import, export, and \\\"share\\\" features accessible in the top\\nnavigation, and saves work-in-progress in your browser.  If you want to save a\\ngraph for later editing, export the `sexp` format, or save the \\\"share\\\" link.\\nOther exports do not allow resuming editing.\\n\\n## Syntax\\n\\nThe DSL uses [s-expression][]s to represent the hierarchy and connections\\nbetween actors, systems, containers, and components. If you squint your eyes, it\\nlooks like common lisp or scheme macros.\\n\\nWe use the excellent [CodeMirror][] in-browser editor to add syntax highlighting\\nand some help with managing the parentheses.\\n\\n[CodeMirror]: https://codemirror.net/\\n[s-expression]: https://en.wikipedia.org/wiki/S-expression\\n\\n### Full example\\n\\nHere's a small bit of software archicture for a web application, demonstrating\\nsome of the syntax.\\n\\n    (define-actor (\\\"customer\\\")\\n      (edge :to \\\"dog rater\\\" :description \\\"views/votes/uploads dog pictures\\\"))\\n\\n    (define-system (\\\"dog rater\\\" :desc \\\"fun clickbait website\\\")\\n\\n      (def-container (\\\"frontend\\\" :tech \\\"typescript, reactjs\\\")\\n        (edge :to \\\"./database\\\" :desc \\\"display sweet dog pictures\\\" \\n              :direction \\\"both\\\")\\n        )\\n\\n      (def-container (\\\"backend\\\" :tech \\\"golang\\\")\\n        (def-component (\\\"ad provider\\\")\\n          (edge :to \\\"third party ad network\\\" :desc \\\"fetch user-specific ads\\\")\\n          )\\n        )\\n\\n      (def-container (\\\"database\\\" :tech \\\"amazon S3\\\"))\\n    )\\n\\n    (def-system (\\\"third party ad network\\\" :desc \\\"advert network\\\"))\\n\\n### Actors\\n\\nTop level element, represents a human using the software.\\n\\nExamples:\\n\\n    (define-actor (\\\"customer\\\")\\n      ;; optional edges to other parts of the architecture\\n      )\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-actor ((name) &body children))\\n\\n### Systems\\n\\nTop level element, represents a logical software system.\\n\\nExamples:\\n\\n    (define-system (\\\"name of the system\\\" :description \\\"optional description\\\" \\n                                         :tech \\\"optional technology\\\")\\n      ;; optional children of this system; edges or containers\\n      )\\n    (def-system (\\\"name of the system\\\" :desc \\\"can abbreviate a little; :desc vs :description, def-system vs define-system\\\"))\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-system ((name) &key description tech &body children))\\n\\n### Containers\\n\\nContainers are independently deployable pieces of a system. They should be used as children of a `def-system`\\n\\nExamples:\\n\\n    (def-system (\\\"dog ratr\\\")\\n      (def-container (\\\"frontend\\\" :tech \\\"...\\\" :desc \\\"...\\\")\\n        ;; optional children of this system; edges or components\\n      )\\n    )\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-container ((name) &key description tech &body children))\\n\\n### Components\\n\\nComponents are pieces of one deployable part of a system. These could be things\\nlike java packages, C# assemblies, ES6 modules, etc. They should be used as\\nchildren of a `def-container`\\n\\nExamples:\\n\\n    (def-system (\\\"dog ratr\\\")\\n      (def-container (\\\"frontend\\\")\\n        (def-component (\\\"upload page\\\" :tech \\\"...\\\" :desc \\\"...\\\"))\\n        (def-component (\\\"dog browser\\\")\\n          ;; optional children, edges\\n        )\\n      )\\n    )\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-component ((name) &key description tech &body children))\\n\\n### Edges\\n\\nEdges represent connections between the different elements in a software\\narchitecture. These have a few different options for how to connect things.\\nConnections are specified using something like a file path to unambiguously\\nidentify the destination of an edge.\\n\\nThey can be used as children of `def-actor`, `def-system`, `def-container`, and\\n`def-component`.\\n\\nYou can customize the direction of the edge using the `:direction` (`:dir` for\\nshort) option. The valid options are:\\n\\n* `push` - (default), indicates this node is reaching out to the target. Draws\\n  an arrow from the current node to the target.\\n* `pull` - indicates this node is pulling from the target, e.g. as a subscriber.\\n  Draws an arrow from the target to the current node.\\n* `both` - indicates bidrectional flow of actions/information. Draws an arrow to\\n  and from the target to the current node.\\n\\nExamples:\\n\\n    (def-actor (\\\"customer\\\")\\n      ;; connect this actor to the dog ratr system, and describe\\n      ;; how the actor uses the system\\n      (edge :to \\\"dog ratr\\\" :desc \\\"clicks a lot of links and ads\\\"))\\n\\n    (def-system (\\\"dog ratr\\\")\\n      (def-container (\\\"frontend\\\")\\n        ;; connect the frontend to the backend, with a relative path\\n        (edge :to \\\"./backend\\\" :desc \\\"fetch list of dogs\\\" :dir \\\"both\\\")\\n        ;; can specify a \\\"full\\\" path to connect with nodes that aren't\\n        ;; on the top level\\n        (edge :to \\\"ad server/click tracker\\\" :desc \\\"records a click via HTTP\\\")\\n      )\\n      (def-container (\\\"backend\\\"))\\n    )\\n\\n    (def-system (\\\"ad server\\\")\\n      (def-container (\\\"click tracker\\\")))\\n\\nIf this were a real lisp function, it's definition would look like:\\n\\n    (defun edge (&key to description (direction \\\"both\\\")))\\n\\n### Comments\\n\\nComments are of questionable use since they don't show up in the diagrams at\\nall, but they are useful for commenting out code while you're still hasing out\\nthe architecture.\\n\\nAny content after two colons is ignored as a comment.\\n\\nExamples:\\n\\n    ;; this whole line is a comment\\n    (def-system (\\\"dog ratr\\\")) ;; this bit is ignored, too\\n\"\n\n/***/ }),\n\n/***/ 441:\n/***/ (function(module, exports) {\n\nmodule.exports = \"(title \\\"c4-lab\\\")\\n;; add an actor to represent humans that use your system\\n(define-actor (\\\"Devs\\\")\\n  ;; add edges to say what part of your system the actor uses\\n  (edge\\n   ;; specify where the other end of this edge is using something like a path\\n   ;; \\\"C4 Lab/UI\\\" points at the \\\"C4 Lab\\\" system, the the \\\"UI\\\" container inside\\n   :to \\\"C4 Lab/UI\\\"\\n   :description \\\"Create/read/update designs\\\")\\n  )\\n;; add your system\\n(define-system (\\\"C4 Lab\\\"\\n                :description \\\"Web-based rapid prototyping of C4 diagrams to augment whiteboards\\\")\\n  ;; add the containers inside your system\\n  (def-container (\\\"UI\\\" :tech \\\"html5, angularjs\\\"\\n                       :description \\\"prototype, import, export C4 diagrams\\\" ))\\n  )\\n(define-system (\\\"Github\\\" :description \\\"Free git and web hosting\\\")\\n  ;; add edges between any actor, system, or container\\n  (edge :description \\\"hosts\\\" :to \\\"C4 Lab/UI\\\")\\n  (edge :to \\\"Travis-ci\\\" :description \\\"triggers build\\\")\\n  )\\n(define-system (\\\"Travis-ci\\\" :description \\\"Open source CI\\\")\\n  (edge :to \\\"Github\\\" :description \\\"publishes\\\"))\\n;; any line that starts with \\\";;\\\" is a comment\\n\"\n\n/***/ }),\n\n/***/ 61:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _parse = __webpack_require__(227);\n\nObject.defineProperty(exports, 'parse', {\n  enumerable: true,\n  get: function get() {\n    return _parse.parse;\n  }\n});\nObject.defineProperty(exports, 'SyntaxError', {\n  enumerable: true,\n  get: function get() {\n    return _parse.SyntaxError;\n  }\n});\nObject.defineProperty(exports, 'ParseError', {\n  enumerable: true,\n  get: function get() {\n    return _parse.ParseError;\n  }\n});\n\nvar _codegen = __webpack_require__(151);\n\nObject.defineProperty(exports, 'uriEncode', {\n  enumerable: true,\n  get: function get() {\n    return _codegen.uriEncode;\n  }\n});\nObject.defineProperty(exports, 'uriDecode', {\n  enumerable: true,\n  get: function get() {\n    return _codegen.uriDecode;\n  }\n});\nObject.defineProperty(exports, 'toSvg', {\n  enumerable: true,\n  get: function get() {\n    return _codegen.toSvg;\n  }\n});\n\nvar _DataStore = __webpack_require__(235);\n\nObject.defineProperty(exports, 'DataStore', {\n  enumerable: true,\n  get: function get() {\n    return _DataStore.DataStore;\n  }\n});\n\nvar _exporter = __webpack_require__(226);\n\nObject.defineProperty(exports, 'Exporter', {\n  enumerable: true,\n  get: function get() {\n    return _exporter.Exporter;\n  }\n});\nObject.defineProperty(exports, 'formats', {\n  enumerable: true,\n  get: function get() {\n    return _exporter.formats;\n  }\n});\n\nvar _dotWriter = __webpack_require__(225);\n\nObject.defineProperty(exports, 'toDot', {\n  enumerable: true,\n  get: function get() {\n    return _dotWriter.toDot;\n  }\n});\n\n/***/ })\n\n},[231]);\n\n\n// WEBPACK FOOTER //\n// main.d6d0fbfe7a2c0e85db0e.js","import angular from 'angular'\nimport * as nav from \"./nav.component\"\nimport * as about from \"./about.component\"\n\nexport default angular.module('c4-lab.header', [\n    'ui.bootstrap',\n    'ui.router'])\n    .component(nav.name, nav.options)\n    .component(about.name, about.options)\n    .name\n\n\n// WEBPACK FOOTER //\n// ./src/header/index.js","import * as angular from 'angular'\nimport 'angular-ui-bootstrap'\nimport 'angular-ui-router'\n\nimport * as viewer from './viewer.component'\n\nexport default angular.module('c4-lab.viewer', ['ui.bootstrap',\n  'ui.router'])\n    .component(viewer.name, viewer.options)\n    .name;\n\n\n// WEBPACK FOOTER //\n// ./src/viewer/index.js","import template from './about.html'\n\nexport const name = \"c4LabAboutModal\"\nexport const options = {\n    template: template,\n    bindings: {\n        close: '&'\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/header/about.component.js","import * as lz from 'lz-string'\nimport Viz from 'viz.js'\n\ntype elementCreator = (tagName: string) => HTMLElement\n\n/**\n * convert a graph from DOT text to SVG\n */\nexport const toSvg = (dot: string) => Viz(dot, { format: 'svg', engine: 'dot' }) as string\n\n/**\n * convert a text representation to an URI-encoded representation\n */\nexport const uriEncode = (text: string) => lz.compressToEncodedURIComponent(text)\n\n/**\n * convert an URI-encoded representation to a text representation\n */\nexport const uriDecode = (uriData: string) => lz.decompressFromEncodedURIComponent(uriData)\n\n/**\n * convert DOT text to a png-encoded data URI\n */\nexport const toPngDataUri = (dot: string, createElement: elementCreator) => {\n    const svg = toSvg(dot)\n    const img = createElement('img') as HTMLImageElement\n    return new Promise((resolve) => {\n        img.onload = () => resolve(toDataUrl(img, createElement))\n        img.setAttribute('src', 'data:image/svg+xml,' + encodeURIComponent(svg))\n    })\n}\n\nfunction toDataUrl(img: HTMLImageElement, createElement: elementCreator) {\n    const canvas = createElement('canvas') as HTMLCanvasElement\n    canvas.width = img.width\n    canvas.height = img.height\n    const context = canvas.getContext('2d')\n    if (context) {\n        context.drawImage(img, 0, 0)\n        const dataUrl = canvas.toDataURL('image/png')\n        return dataUrl\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./~/tslint-loader!./src/core/codegen.ts","import template from './template.html'\n\nclass BuildInfoController {\n    constructor() {\n        /* global process */\n        this.version = process.env.npm_package_version\n        this.build = process.env.TRAVIS_BUILD_NUMBER || 'SNAPSHOT'\n        this.hash = process.env.TRAVIS_COMMIT || process.env.npm_package_gitHead || 'HEAD'\n    }\n}\n\nexport const name = 'c4LabBuildInfo'\nexport const options = {\n    template: template,\n    controller: BuildInfoController\n}\n\n\n// WEBPACK FOOTER //\n// ./src/build-info/index.js","export * from \"./editor.component\"\n\n\n// WEBPACK FOOTER //\n// ./src/editor/index.js","import * as angular from 'angular'\nimport template from './help.html'\nimport helpMarkdown from './help.md'\nimport 'angular-marked'\n\nclass HelpController {\n    constructor(){\n        this.content = helpMarkdown\n    }\n}\n\nexport default angular\n    .module('c4-lab.help', ['hc.marked'])\n    .component('c4LabHelp', {\n        template,\n        controller: HelpController\n    })\n    .name\n\n\n// WEBPACK FOOTER //\n// ./src/help/index.js","import * as angular from 'angular'\nimport * as previewComponent from './preview.component'\nimport header from '../header'\nimport viewer from '../viewer'\n\nexport default angular.module('c4-lab.preview', [header, viewer])\n    .component(previewComponent.name, previewComponent.options)\n    .name;\n\n\n// WEBPACK FOOTER //\n// ./src/preview/index.js","class StateParamMirrorController {\n  constructor($stateParams){\n    'ngInject'\n    Object.assign(this, $stateParams)\n  }\n}\n\nfunction configureRoutes($stateProvider, $urlRouterProvider) {\n  'ngInject'\n  $urlRouterProvider.otherwise('/');\n  $stateProvider\n    .state('home', {\n      url: '/?zoom',\n      template: '<c4-lab-app zoom=\"vm.zoom\"/>',\n      controller: StateParamMirrorController,\n      controllerAs: 'vm'\n    })\n    .state('load', {\n      url: '/load/{data}?zoom',\n      template: '<c4-lab-preview encoded-text=\"vm.data\" zoom=\"vm.zoom\" />',\n      controller: StateParamMirrorController,\n      controllerAs: 'vm'\n    })\n    .state('help', {\n      url: '/help',\n      template: '<c4-lab-help />'\n    })\n}\n\nexport default configureRoutes;\n\n\n// WEBPACK FOOTER //\n// ./src/routes.js","export * from \"./app.component\"\n\n\n// WEBPACK FOOTER //\n// ./src/shell/index.js","import wordwrap from 'wordwrap'\nimport { flattenDeep, isString, uniq } from 'lodash'\n\n\nconst DEFAULT_SHAPE = 'box'\nconst typeShapeMap = {\n    actor: 'egg',\n    container: 'box3d',\n    component: 'component'\n}\n\nexport class DotContext {\n    constructor(hrefTo) {\n        this.indent = ''\n        this.lines = []\n        this.wordwrap = wordwrap(30)\n        this.hrefTo = hrefTo\n    }\n\n    load(graph, zoomNodeId) {\n        this.graph = graph\n        this.zoomNodeId = zoomNodeId\n        this.visibleIds = zoomNodeId\n            ? this.findVisibleNodes(zoomNodeId)\n            : graph.roots\n\n        this.visibleIds.sort()\n\n        this.visibleEdges = graph.edges\n            .filter(x => this.isEdgeVisible(x))\n    }\n\n    findVisibleNodes(zoomNodeId) {\n        this.rootNode = this.graph.idMap[zoomNodeId]\n        const parent = this.graph.idMap[this.rootNode.parentId]\n\n        const visibleIds = this.rootNode.children\n            .concat(parent ? parent.children : [])\n            .map(x => x.id)\n            .concat(this.graph.roots)\n            .concat([this.rootNode.id, this.rootNode.parentId])\n            .filter(x => x)\n\n        return uniq(visibleIds)\n    }\n\n    toDotId(nodeOrId) {\n        const id = isString(nodeOrId) ? nodeOrId : nodeOrId.id\n\n        return 'g' + this.visibleIds.indexOf(id)\n    }\n\n    toDescription(nodeOrText, htmlNewlines = true) {\n        const text = isString(nodeOrText) ? nodeOrText : nodeOrText.description\n\n        if (!text) return ''\n\n        const wrapped = this.wordwrap(text)\n\n        return htmlNewlines\n            ? wrapped.replace(/\\n/g, '<br/>\\n')\n            : wrapped\n    }\n\n    toLabel(edgeOrText) {\n        return this.toDescription(edgeOrText, false)\n            .replace(/\"/g, '\\\\\"')\n            .replace(/\\n/g, '\\\\n')\n    }\n\n    isEdgeVisible(edge) {\n        return this.isIdVisible(edge.sourceId)\n            || this.isIdVisible(edge.destinationId)\n            || this.isCrossingSystems(edge)\n    }\n\n    isCrossingSystems(edge) {\n        const visibleSourceIds = this.findVisibleIds(edge.sourceParentIds)\n        const visibleDestinationIds = this.findVisibleIds(edge.destinationParentIds)\n\n        return visibleSourceIds[0] !== visibleDestinationIds[0]\n    }\n\n    findVisibleIds(ids) {\n        return ids.filter(x => this.isIdVisible(x))\n    }\n\n    isIdVisible(id) {\n        return this.visibleIds.includes(id)\n    }\n\n    drawCluster(indent, rootNode, style = \"rounded\") {\n        const dotId = this.toDotId(rootNode)\n        const label = this.toLabel(rootNode.name)\n\n        const nonClustered = this.graph.roots\n            .filter(x => x !== rootNode.id)\n            .filter(x => x !== rootNode.parentId)\n\n        return [\n            `${indent}subgraph cluster_${dotId} {\n${indent}  label=<${DOT.b(label)}> style=\"${style}\"`,\n            '',\n            `${indent}  ${dotId} [style=\"invisible\"]`,\n            '',\n            this.drawItems(rootNode.children, indent + '  '),\n            `${indent}}`,\n            rootNode.parentId ? [] : this.drawItems(nonClustered, indent)\n        ]\n    }\n\n    drawChildCluster(indent) {\n        const parent = this.graph.idMap[this.rootNode.parentId]\n        const dotId = this.toDotId(parent)\n        const label = this.toLabel(parent.name)\n\n        const nonClustered = this.graph.roots\n            .filter(x => x !== parent.id)\n        const otherChildren = parent.children\n            .filter(x => x !== this.rootNode);\n\n        const nextIndent = `${indent}  `\n\n        return [\n            `${indent}subgraph cluster_${dotId} {`,\n            `${nextIndent}label=<${DOT.b(label)}> style=\"rounded\"`,\n            '',\n            `${nextIndent}${dotId} [style=\"invisible\"]`,\n            this.drawItems(otherChildren, nextIndent),\n            '',\n            this.drawCluster(nextIndent, this.rootNode, 'solid'),\n            `${indent}}`,\n            this.drawItems(nonClustered, indent)\n        ]\n    }\n\n    draw() {\n        const lines = [`digraph g {`]\n            .concat([...this.digraphHeaders('  ')])\n            .concat([\n                this.rootNode && this.rootNode.parentId\n                    ? this.drawChildCluster('  ')\n                    : this.rootNode\n                        ? this.drawCluster('  ', this.rootNode)\n                        : this.drawItems(this.visibleIds, '  '),\n                '',\n                this.visibleEdges\n                    .map(x => this.drawEdge(x, '  ')),\n                '}', ''\n            ])\n\n        return flattenDeep(lines).join('\\n')\n    }\n\n    * digraphHeaders(indent) {\n        yield `${indent}compound=true`\n        if (this.graph.title) {\n            yield `${indent}label=\"${this.toLabel(this.graph.title)}\"`\n            yield `${indent}fontsize=20`\n            yield `${indent}labelloc=t`\n        }\n        yield `${indent}node[fontsize=12]`\n        yield `${indent}edge[fontsize=12]`\n        yield ''\n    }\n\n    toTechDescription(text) {\n        if (!text) return ''\n\n        text = this.toDescription(text)\n        text = DOT.font(\"#666666\", DOT.i(`&#171;${text}&#187;`))\n\n        return `\n<br/>\n${text}\n<br/>`\n    }\n\n    drawItems(nodesOrIds, indent) {\n        return nodesOrIds\n            .map(x => isString(x) ? this.graph.idMap[x] : x)\n            .filter(x => x.type !== 'edge')\n            .map(x => this.drawItem(x, indent))\n    }\n\n    drawItem(node, indent) {\n        const dotId = this.toDotId(node)\n\n        const tech = this.toTechDescription(node.tech)\n\n        const desc = node.description\n            ? '\\n<br/>\\n' + this.toDescription(node)\n            : ''\n\n        const shape = typeShapeMap[node.type] || DEFAULT_SHAPE\n\n        const attrs = {\n            shape\n        }\n\n        let name = DOT.b(node.name)\n        if (this.hrefTo && node.children && node.children.some(x => x.type !== 'edge')) {\n            attrs.href = this.hrefTo(node.id)\n            attrs.tooltip = `See more details about ${node.name}`\n            name = DOT.font('blue', DOT.u(name))\n        }\n\n        attrs.label = `<\n${name}${tech}${desc}\n${indent}>`\n\n        return `${indent}${dotId} ${DOT.attrList(attrs)}`\n    }\n\n    drawEdge(edge, indent) {\n\n        const srcOk = this.isIdVisible(edge.sourceId)\n        const dstOk = this.isIdVisible(edge.destinationId)\n\n        const getId = (idOk, id, parentIds) => {\n            return idOk ? id : parentIds.find(x => this.isIdVisible(x))\n        }\n\n        const srcId = getId(srcOk, edge.sourceId, edge.sourceParentIds)\n        const dstId = getId(dstOk, edge.destinationId, edge.destinationParentIds)\n\n        const src = this.toDotId(srcId)\n        const dst = this.toDotId(dstId)\n\n        const attrs = {}\n\n        if (edge.description) {\n            attrs.label = this.toLabel(edge)\n        }\n\n        if (!(srcOk && dstOk)) {\n            attrs.style = 'dashed'\n        }\n\n        if (srcId === this.zoomNodeId) {\n            attrs.ltail = `cluster_${src}`\n        }\n\n        if (dstId === this.zoomNodeId) {\n            attrs.lhead = `cluster_${dst}`\n        }\n        attrs.dir = this.getEdgeDirection(edge.direction)\n\n        return `${indent}${src} -> ${dst} ${DOT.attrList(attrs)}`\n    }\n\n    getEdgeDirection(direction){\n        switch(direction){\n            case \"both\":\n                return \"both\"\n            case \"pull\":\n                return \"back\"\n            default:\n                return null\n        }\n    }\n}\n\nclass DOT {\n    static i(text) { return `<i>${text}</i>` }\n    static b(text) { return `<b>${text}</b>` }\n    static u(text) { return `<u>${text}</u>` }\n    static font(color, text) { return `<font color=\"${color}\">${text}</font>` }\n    static attrList(attrs) {\n        const dotAttrs = Reflect.ownKeys(attrs)\n            .filter(x => attrs[x])\n            .map(x => `${x}=${DOT.quoteAttr(attrs[x])}`)\n            .join(' ')\n\n        return `[${dotAttrs}]`\n    }\n    static quoteAttr(value) {\n        return /^</.test(value) ? value : `\"${value}\"`\n    }\n\n}\n\n\n/**\n * build a DOT representation of the graph\n */\nexport const toDot = (graph, zoomNodeId, hrefTo) => {\n    const ctx = new DotContext(hrefTo)\n    ctx.load(graph, zoomNodeId)\n    return ctx.draw()\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/dot-writer.js","import { toPngDataUri } from './codegen'\n\nexport const formats = 'sexp dot png'.split(' ')\n\nexport class Exporter {\n\n    constructor(document) {\n        this.createElement = e => document.createElement(e)\n    }\n\n    export(format, title, text, dot) {\n        this[format](title || 'c4-lab-graph', text, dot)\n    }\n\n    sexp(title, text) {\n        this.downloadFile(`${title}.sexp`, text, 'text/plain')\n    }\n\n    dot(title, text, dot) {\n        this.downloadFile(`${title}.dot`, dot, 'text/plain')\n    }\n\n    png(title, text, dot) {\n        toPngDataUri(dot, this.createElement)\n            .then(dataUri => this.downloadFile(`${title}.png`, dataUri))\n    }\n\n    downloadFile(filename, content, contentType = null) {\n        const a = this.createElement('a');\n        a.download = filename;\n        if (contentType) {\n            a.href = `data:${contentType},${encodeURIComponent(content)}`;\n        } else {\n            a.href = content;\n        }\n        a.click();\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/exporter.js","import SParse from 's-expression'\nimport md5 from 'md5'\nimport { isString } from 'lodash'\nimport * as path from 'path'\n\nexport const pathToId = md5\n\n\nconst stripComments = text => text.replace(/^\\s*;;.*$/gm, '')\n// SParse.SyntaxError is just an alias for Error, unfortunately\nexport const SyntaxError = SParse.SyntaxError\nexport class ParseError extends Error { }\nexport class TitleNotAStringError extends ParseError {\n    constructor(input) {\n        super('title must be a string, was: ' + JSON.stringify(input))\n    }\n}\nexport class TitleNotAtTopLevelError extends ParseError {\n    constructor() {\n        super('title is only allowed at the top level')\n    }\n}\nexport class OptsNotFoundError extends ParseError {\n    constructor(type) { super(`missing options for a ${type}`) }\n}\nexport class NameNotFoundError extends ParseError {\n    constructor(type) { super(`missing a name for a ${type}`) }\n}\n\nexport class InvalidDirectionError extends ParseError {\n    constructor(dir) { super(`Unknown edge direction \"${dir}\". valid options are \"push\", \"pull\", or \"both\"`) }\n}\n\nconst keywordAliases = [\n    { from: /^:desc.*/i, to: 'description' },\n    { from: /^:to/i, to: 'to' },\n    { from: /^:tech/i, to: 'tech' },\n    { from: /^:dir.*/i, to: 'direction' }\n]\n\nfunction canonicalize(key) {\n    return keywordAliases\n        .filter(({ from }) => from.test(key))\n        .map(({ to }) => to)[0] || key;\n}\n\nfunction parseKeywordArgs(kwargs, allowed = /.*/) {\n    if (kwargs.length === 0) return {};\n\n    const [keyword, value, ...rest] = kwargs;\n    const key = canonicalize(keyword);\n\n    return Object.assign(\n        allowed.test(key) ? { [key]: value.toString() } : {},\n        parseKeywordArgs(rest, allowed));\n}\n\nclass Parser {\n\n    constructor() {\n        this.idMap = {}\n        this.pathMap = {}\n        this.edges = []\n        this.items = []\n    }\n\n    parse(text) {\n        const tokens = SParse('(' + stripComments(text) + ')')\n        if (tokens instanceof SParse.SyntaxError) {\n            throw tokens\n        }\n        this.buildIR(tokens)\n        for (const e of this.edges) {\n            this.postProcessEdge(e)\n        }\n\n        return {\n            title: this.graphTitle,\n            edges: this.edges,\n            items: this.items,\n            roots: this.items\n                .filter(x => !x.parentId)\n                .map(x => x.id),\n            idMap: this.idMap,\n            pathMap: this.pathMap\n        }\n    }\n\n    buildIR(tokens, parent) {\n        return tokens.map(x => this.buildIRNode(x, parent))\n    }\n\n    buildIRNode([type, ...rest], parent) {\n        type = type.replace(/^def(ine)?-/i, '')\n        const node = type in this\n            ? this[type](rest, parent)\n            : this.item(rest, parent, type);\n\n        if (!node) return;\n\n        if (/system|container/i.test(type)\n            && node.children.some(x => x.type !== 'edge')) {\n            node.canExpand = true\n        }\n        return Object.assign(node, { type: type.toLowerCase() });\n    }\n\n    item([opts, ...children], parent, type) {\n        if (!opts) { throw new OptsNotFoundError(type) }\n        const [name, ...kwargs] = opts\n        if (!name) { throw new NameNotFoundError(type) }\n        const path = this.pathToNode(name, parent).toString()\n        const node = {\n            name: name.toString(),\n            id: pathToId(path),\n            path\n        }\n        if (parent) node.parentId = parent.id\n        this.idMap[node.id] = node\n        this.pathMap[node.path] = node.id\n        Object.assign(node, parseKeywordArgs(kwargs, /description|tech/))\n        this.items.push(node)\n        node.children = this.buildIR(children, node)\n        return node;\n    }\n\n    edge(input, parent) {\n        const edge = Object.assign(\n            { sourceId: parent.id },\n            parseKeywordArgs(input, /description|to|tech|direction/))\n        this.edges.push(edge)\n        return edge\n    }\n\n    title([input], parent) {\n        if (!isString(input)) { throw new TitleNotAStringError(input) }\n        if (parent) { throw new TitleNotAtTopLevelError() }\n        this.graphTitle = input.toString();\n    }\n\n    pathToNode(name, parent) {\n        return parent\n            ? this.idMap[parent.id].path + '/' + name\n            : name\n    }\n\n    postProcessEdge(edge) {\n        if (edge.to.startsWith('.')) {\n            const src = this.idMap[edge.sourceId]\n            const parent = this.idMap[src.parentId]\n            edge.to = path.join(parent.path, edge.to)\n        }\n\n        edge.destinationId = this.pathMap[edge.to]\n\n        if (!edge.destinationId) {\n            throw new ParseError(`Could not find node '${edge.to}'`)\n        }\n        if (edge.sourceId === edge.destinationId) {\n            throw new ParseError(`Edge cannot be both from and to '${edge.to}'`)\n        }\n        if (edge.direction) {\n            if (/^(push|pull|both)$/i.test(edge.direction)) {\n                edge.direction = edge.direction.toLowerCase()\n            } else {\n                throw new InvalidDirectionError(edge.direction)\n            }\n        }\n\n        edge.id = pathToId(edge.sourceId + edge.destinationId)\n        edge.sourceParentIds = this.findParentIds(edge.sourceId)\n        edge.destinationParentIds = this.findParentIds(edge.destinationId)\n    }\n\n    findParentIds(id) {\n        const node = this.idMap[id];\n        if (!node.parentId) return [];\n\n        return [node.parentId]\n            .concat(this.findParentIds(node.parentId))\n    }\n}\n\nexport const parse = text => new Parser().parse(text)\n\n\n\n/*\nTODO: detect errors:\n\n* duplicate paths\n\n*/\n\n\n// WEBPACK FOOTER //\n// ./src/core/parse.js","import 'codemirror/mode/commonlisp/commonlisp'\nimport 'codemirror/addon/edit/matchbrackets'\nimport 'codemirror/addon/edit/closebrackets'\nimport '../../node_modules/codemirror/lib/codemirror.css'\nimport '../../node_modules/codemirror/theme/elegant.css'\nimport CodeMirror from 'codemirror'\n\nimport template from './editor.html'\nimport { parse, SyntaxError, ParseError } from '../core'\nimport './editor.css'\n\nexport class EditorController {\n\n    constructor($log) {\n        'ngInject'\n        this.log = $log\n        this.editorOptions = {\n            lineNumbers: true,\n            mode: \"commonlisp\",\n            theme: \"elegant\",\n            matchBrackets: true,\n            autoCloseBrackets: true\n        }\n    }\n\n    $onInit() {\n        this.parse(this.initialText);\n    }\n\n    parse(text) {\n        this.lastError = undefined;\n        this.text = text;\n        try {\n            const parsed = parse(text);\n            this.ngModel.$setViewValue(parsed);\n            this.syntaxIsValid = true\n            this.tryOnParse(text)\n        } catch (e) {\n            this.log.error(e)\n            if (e instanceof SyntaxError || e instanceof ParseError) {\n                this.syntaxIsValid = false\n                this.lastError = e\n            }\n        }\n    }\n\n    tryOnParse(text) {\n        if (!this.onParse) return;\n        try {\n            this.onParse({ text })\n        } catch (e) {\n            this.log.error('Trouble firing onParse event', e);\n        }\n    }\n}\n\nexport const name = \"c4LabEditor\"\nexport const options = {\n    require: {\n        ngModel: '^'\n    },\n    template: template,\n    // TODO: use a custom validator tied to the parser\n    controller: EditorController,\n    bindings: {\n        initialText: '<',\n        onParse: '&'\n    }\n}\n\n// @ngInject\nexport function install($window, $log) {\n    $log.debug('installing codemirror')\n    $window.CodeMirror = CodeMirror;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/editor/editor.component.js","export const readAllText = file => {\n    const reader = new FileReader()\n    return new Promise((resolve, reject) => {\n        reader.onload = loadEvt => resolve(loadEvt.target.result);\n        reader.onerror = reject;\n        reader.readAsText(file);\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./src/header/importer.js","import template from './nav.html'\nimport './nav.css'\nimport { DataStore, uriEncode, formats } from '../core'\nimport { readAllText } from './importer'\nimport * as aboutComponent from './about.component'\n\nclass NavController {\n    constructor($state, $uibModal, $window) {\n        'ngInject'\n        this.$state = $state\n        this.$uibModal = $uibModal\n        this.storage = new DataStore($window.localStorage)\n        this.exportFormats = formats\n    }\n\n    href() {\n        return this.$state.href('load',\n            {\n                data: uriEncode(this.text),\n                zoom: this.zoom\n            });\n    }\n\n    export(format) {\n        this.onExport({ format })\n    }\n\n    import(files) {\n        if (files) {\n            readAllText(files[0])\n                .then(text => this._onImport(text))\n        }\n    }\n\n    openAbout(){\n        this.$uibModal.open({\n            component: aboutComponent.name\n        })\n    }\n\n    _onImport(text) {\n        this.storage.save(text)\n        this.$state.go('home', {}, { reload: true })\n    }\n}\n\nexport const name = \"c4LabNav\"\nexport const options = {\n    template: template,\n    controller: NavController,\n    bindings: {\n        text: '<',\n        onExport: '&',\n        zoom: '<'\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/header/nav.component.js","import * as angular from 'angular'\nimport 'babel-polyfill'\nimport 'angular-ui-codemirror'\nimport 'angular-ui-bootstrap'\nimport 'angular-ui-router'\nimport 'angular-animate'\nimport 'ng-file-upload'\n\nimport * as editor from './editor'\nimport header from './header'\nimport * as shell from './shell'\nimport * as buildInfo from './build-info'\nimport configureRoutes from './routes'\nimport preview from './preview'\nimport viewer from './viewer'\nimport help from './help'\n\nangular.module('c4-lab', [\n  'ui.codemirror',\n  'ui.bootstrap',\n  'ui.router',\n  'ngAnimate',\n  'ngFileUpload',\n  header,\n  preview,\n  viewer,\n  help])\n  .component(buildInfo.name, buildInfo.options)\n  .component(editor.name, editor.options)\n  .component(shell.name, shell.options)\n  .run(editor.install)\n  .config(allowBlobsAndDataHrefs)\n  .config(configureRoutes)\n\n// @ngInject\nfunction allowBlobsAndDataHrefs($compileProvider) {\n  $compileProvider\n    .aHrefSanitizationWhitelist(/^(https?|ftp|mailto|blob|data):/i);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import template from './preview.html'\nimport { parse, uriDecode, Exporter, DataStore } from '../core'\n\nclass PreviewComponent{\n    constructor($window, $state){\n        this.exporter = new Exporter($window.document)\n        this.storage = new DataStore($window.localStorage)\n        this.$state = $state\n    }\n\n    $onChanges(){\n        this.text = uriDecode(this.encodedText)\n        this.graph = parse(this.text)\n    }\n\n    onExport(format) {\n        this.exporter.export(format, this.graph.title, this.text, this.dot)\n    }\n\n    edit(){\n        this.storage.save(this.text)\n        this.$state.go('home')\n    }\n}\n\n\nexport const name = 'c4LabPreview';\nexport const options = {\n    template,\n    controller: PreviewComponent,\n    bindings: {\n        zoom: '<',\n        encodedText: '<'\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/preview/preview.component.js","import { DataStore, Exporter } from '../core'\nimport template from './app.html'\nimport sample from './c4lab.sexp'\n\nexport class AppController {\n\n    constructor($log, $window) {\n        'ngInject'\n        this.log = $log\n        this.$window = $window\n        this.storage = new DataStore($window.localStorage)\n        this.exporter = new Exporter($window.document)\n        this.codeExpanded = true;\n    }\n\n    $onInit() {\n        this.initialText = this.storage.load() || sample\n    }\n\n    onParse(text) {\n        this.log.debug('onParse')\n        this.text = text\n        this.storage.save(text)\n    }\n\n    onExport(format) {\n        this.exporter.export(format, this.graph.title, this.text, this.dot)\n    }\n}\n\nexport const name = \"c4LabApp\"\nexport const options = {\n    template: template,\n    controller: AppController,\n    bindings: {\n        zoom: '<'\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shell/app.component.js","import template from './viewer.html'\nimport { toSvg, toDot } from '../core'\n\nclass ViewerComponent {\n    constructor($log, $sce, $state) {\n        'ngInject'\n        this.$log = $log;\n        this.$state = $state;\n\n        this.toSvg = dot => $sce.trustAsHtml(toSvg(dot))\n    }\n\n    $onChanges(diffs) {\n        if (diffs.graph) this._onGraphChanged();\n    }\n\n    onZoom() {\n        const [name, params] = this._nextState();\n        return this.$state.go(name, params);\n    }\n\n    _onGraphChanged() {\n        this.$log.debug('redrawing')\n        this._recalculateExpandableNodes()\n        this.dot = toDot(this.graph, this.zoom, x => this._hrefTo(x))\n\n        this.svg = this.toSvg(this.dot)\n        this.ngModel.$setViewValue(this.dot);\n    }\n\n    _nextState(zoom = this.zoom) {\n        const name = this.$state.current.name;\n        const params = Object.assign({}, this.$state.params, { zoom })\n        return [name, params]\n    }\n\n    _hrefTo(zoom) {\n        const [name, params] = this._nextState(zoom);\n        return this.$state.href(name, params);\n    }\n\n    _recalculateExpandableNodes() {\n        this.expandableNodes = this.graph.items\n            .filter(x => x.canExpand)\n            .sort(x => x.path)\n    }\n\n}\n\n\nexport const name = 'c4LabViewer';\nexport const options = {\n    require: {\n        ngModel: '^'\n    },\n    transclude: true,\n    template,\n    controller: ViewerComponent,\n    bindings: {\n        zoom: '<',\n        graph: '<'\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/viewer/viewer.component.js","const LOCALSTORAGE_KEY = 'C4-LAB-ACTIVE-DOC-VNEXT'\n\nexport class DataStore {\n\n    constructor(private localStorage: Storage) { }\n\n    public load() {\n        return this.localStorage.getItem(LOCALSTORAGE_KEY)\n    }\n\n    public save(text: string) {\n        this.localStorage.setItem(LOCALSTORAGE_KEY, text)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./~/tslint-loader!./src/core/DataStore.ts","module.exports = \"<span class=\\\"text-muted small\\\" title=\\\"{{$ctrl.hash}}\\\">\\n  v{{$ctrl.version}}+{{$ctrl.build}}\\n</span>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/build-info/template.html\n// module id = 425\n// module chunks = 1","module.exports = \"<div ng-class=\\\"{'bg-success': $ctrl.syntaxIsValid, 'bg-danger': !$ctrl.syntaxIsValid}\\\" style=\\\"padding: 0 1em;\\\">\\n    <ui-codemirror\\n        ui-codemirror-opts=\\\"$ctrl.editorOptions\\\"\\n        ng-model=\\\"$ctrl.text\\\"\\n        ng-model-options=\\\"{ debounce: 500 }\\\"\\n        ng-change=\\\"$ctrl.parse($ctrl.text)\\\">\\n    </ui-codemirror>\\n    <span class=\\\"help-block\\\">{{ $ctrl.lastError.message }}</span>\\n</div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/editor/editor.html\n// module id = 426\n// module chunks = 1","module.exports = \"<div class=\\\"modal-header\\\">\\n    <h3 class=\\\"modal-title\\\" id=\\\"modal-title\\\">About</h3>\\n</div>\\n<div class=\\\"modal-body\\\" id=\\\"modal-body\\\">\\n    <p>C4 Lab helps to create diagrams expressing a software architecture using a small lisp-like language, and share those\\n        diagrams as images or text.\\n    </p>\\n    <p>\\n        This is a based on <a href=\\\"http://www.simonbrown.je/\\\">Simon Brown</a>'s <a href=\\\"http://www.codingthearchitecture.com/2014/08/24/c4_model_poster.html\\\">C4</a>        approach: Context, Containers, Components, and Classes. See <a href=\\\"https://leanpub.com/visualising-software-architecture\\\">Visualising Software Architecture</a>        for more information.\\n    </p>\\n    <p>\\n        If you have any feedback or problems, please open a <a href=\\\"https://github.com/ryepup/c4-lab/issues\\\">issue on github</a>.\\n    </p>\\n    <c4-lab-build-info></c4-lab-build-info>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <button class=\\\"btn btn-primary\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.close()\\\">Close</button>\\n</div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/header/about.html\n// module id = 427\n// module chunks = 1","module.exports = \"<nav class=\\\"navbar navbar-default\\\">\\n    <div class=\\\"container-fluid\\\">\\n        <div class=\\\"navbar-header\\\">\\n            <a class=\\\"navbar-brand\\\" href=\\\"#\\\">C4 Lab</a>\\n        </div>\\n\\n        <p class=\\\"navbar-text navbar-right c4lab-build\\\">\\n            <c4-lab-build-info></c4-lab-build-info>\\n        </p>\\n\\n        <div class=\\\"navbar-collapse collapse\\\">\\n            <ul class=\\\"nav navbar-nav\\\">\\n                <li>\\n                    <a popover-placement=\\\"bottom\\\" uib-popover-template=\\\"'_share.html'\\\">\\n                        <span class=\\\"glyphicon glyphicon-duplicate\\\"> </span> Share\\n                    </a>\\n                </li>\\n                <li>\\n                    <a ngf-select=\\\"$ctrl.import($files)\\\" ngf-pattern=\\\"'.sexp'\\\" ngf-accept=\\\"'.sexp'\\\">\\n                        <span class=\\\"glyphicon glyphicon-open-file\\\"> </span> Import\\n                    </a>\\n                </li>\\n                <li class=\\\"dropdown\\\" uib-dropdown>\\n                    <a uib-dropdown-toggle>\\n                        <span class=\\\"glyphicon glyphicon-picture\\\"> </span> Export <span class=\\\"caret\\\"></span>\\n                    </a>\\n                    <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n                        <li ng-repeat=\\\"format in $ctrl.exportFormats\\\">\\n                            <a ng-click=\\\"$ctrl.export(format)\\\">{{format}}</a>\\n                        </li>\\n                    </ul>\\n                </li>\\n                <li>\\n                    <a href=\\\"#\\\" ng-click=\\\"$ctrl.openAbout()\\\">\\n                        <span class=\\\"glyphicon glyphicon-info-sign\\\"> </span> About\\n                    </a>\\n                </li>\\n                <li>\\n                    <a ui-sref=\\\"help\\\">\\n                        <span class=\\\"glyphicon glyphicon-question-sign\\\"> </span> Help\\n                    </a>\\n                </li>\\n            </ul>\\n        </div>\\n    </div>\\n</nav>\\n\\n<script type=\\\"text/ng-template\\\" id=\\\"_share.html\\\">\\n    <div style=\\\"width:10em;\\\">\\n        <a ng-href=\\\"{{$ctrl.href()}}\\\" target=\\\"_blank\\\">\\n            <span class=\\\"glyphicon glyphicon-new-window\\\" > </span>\\n            Link to this page</a>\\n    </div>\\n</script>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/header/nav.html\n// module id = 428\n// module chunks = 1","module.exports = \"<c4-lab-nav></c4-lab-nav>\\n<div marked=\\\"$ctrl.content\\\"></div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/help/help.html\n// module id = 429\n// module chunks = 1","module.exports = \"<c4-lab-nav text=\\\"$ctrl.text\\\" on-export=\\\"$ctrl.onExport(format)\\\" zoom=\\\"$ctrl.zoom\\\"></c4-lab-nav>\\n<c4-lab-viewer graph=\\\"$ctrl.graph\\\" zoom=\\\"$ctrl.zoom\\\" ng-model=\\\"$ctrl.dot\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary hidden-xs hidden-sm\\\" ng-click=\\\"$ctrl.edit()\\\">Start editing this graph</button>\\n</c4-lab-viewer>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/preview/preview.html\n// module id = 430\n// module chunks = 1","module.exports = \"<c4-lab-nav text=\\\"$ctrl.text\\\" on-export=\\\"$ctrl.onExport(format)\\\" zoom=\\\"$ctrl.zoom\\\"></c4-lab-nav>\\n<div class=\\\"container-fluid\\\">\\n    <div class=\\\"row\\\">\\n        <div ng-class=\\\"$ctrl.codeExpanded ? 'col-md-6' : 'col-md-4'\\\">\\n            <c4-lab-editor ng-model=\\\"$ctrl.graph\\\" initial-text=\\\"$ctrl.initialText\\\" on-parse=\\\"$ctrl.onParse(text)\\\"></c4-lab-editor>\\n\\n            <button class=\\\"btn btn-default btn-block\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.codeExpanded = !$ctrl.codeExpanded\\\">\\n                <span class=\\\"glyphicon\\\"\\n                    ng-class=\\\"$ctrl.codeExpanded ? 'glyphicon-chevron-left' : 'glyphicon-chevron-right'\\\"></span> \\n                    Show {{$ctrl.codeExpanded ? 'less' : 'more'}} code\\n            </button>\\n        </div>\\n        <div ng-class=\\\"$ctrl.codeExpanded ? 'col-md-6' : 'col-md-8'\\\">\\n            <c4-lab-viewer graph=\\\"$ctrl.graph\\\" zoom=\\\"$ctrl.zoom\\\" ng-model=\\\"$ctrl.dot\\\">\\n            </c4-lab-viewer>\\n        </div>\\n    </div>\\n</div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/shell/app.html\n// module id = 431\n// module chunks = 1","module.exports = \"<div>\\n    <form class=\\\"form-inline\\\">\\n        <div class=\\\"form-group\\\">\\n            <label for=\\\"zoomableNodes\\\">Zoom to node</label>\\n            <select name=\\\"zoomableNodes\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.zoom\\\" ng-change=\\\"$ctrl.onZoom()\\\">\\n                <option ng-value=\\\"undefined\\\">--none--</option>\\n                <option ng-repeat=\\\"node in $ctrl.expandableNodes track by node.id\\\"\\n                    value=\\\"{{node.id}}\\\">{{node.path}}</option>\\n            </select>\\n        </div>\\n        <div class=\\\"form-group\\\" ng-transclude>\\n        </div>\\n    </form>\\n    <uib-tabset>\\n        <uib-tab heading=\\\"svg\\\">\\n            <div ng-bind-html=\\\"$ctrl.svg\\\"></div>'\\n        </uib-tab>\\n        <uib-tab heading=\\\"dot\\\">\\n            <p>This is for debugging purposes</p>\\n            <!-- TODO: a disabled text area -->\\n            <pre>{{$ctrl.dot}}</pre>\\n        </uib-tab>\\n    </uib-tabset>\\n    <div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/viewer/viewer.html\n// module id = 432\n// module chunks = 1","module.exports = \"# C4-Lab Help\\n\\nC4-Lab defines a domain specific language (DSL) for creating software\\narchitectures, modeled heavily after [Simon Brown][SB]'s [C4][] approach\\n(Context, Containers, Components, and Classes). See [Visualising Software\\nArchitecture][] for more information.\\n\\n[SB]: http://www.simonbrown.je/\\n[C4]: http://www.codingthearchitecture.com/2014/08/24/c4_model_poster.html\\n[Visualising Software Architecture]: https://leanpub.com/visualising-software-architecture\\n\\n## Features\\n\\nC4-Lab has import, export, and \\\"share\\\" features accessible in the top\\nnavigation, and saves work-in-progress in your browser.  If you want to save a\\ngraph for later editing, export the `sexp` format, or save the \\\"share\\\" link.\\nOther exports do not allow resuming editing.\\n\\n## Syntax\\n\\nThe DSL uses [s-expression][]s to represent the hierarchy and connections\\nbetween actors, systems, containers, and components. If you squint your eyes, it\\nlooks like common lisp or scheme macros.\\n\\nWe use the excellent [CodeMirror][] in-browser editor to add syntax highlighting\\nand some help with managing the parentheses.\\n\\n[CodeMirror]: https://codemirror.net/\\n[s-expression]: https://en.wikipedia.org/wiki/S-expression\\n\\n### Full example\\n\\nHere's a small bit of software archicture for a web application, demonstrating\\nsome of the syntax.\\n\\n    (define-actor (\\\"customer\\\")\\n      (edge :to \\\"dog rater\\\" :description \\\"views/votes/uploads dog pictures\\\"))\\n\\n    (define-system (\\\"dog rater\\\" :desc \\\"fun clickbait website\\\")\\n\\n      (def-container (\\\"frontend\\\" :tech \\\"typescript, reactjs\\\")\\n        (edge :to \\\"./database\\\" :desc \\\"display sweet dog pictures\\\" \\n              :direction \\\"both\\\")\\n        )\\n\\n      (def-container (\\\"backend\\\" :tech \\\"golang\\\")\\n        (def-component (\\\"ad provider\\\")\\n          (edge :to \\\"third party ad network\\\" :desc \\\"fetch user-specific ads\\\")\\n          )\\n        )\\n\\n      (def-container (\\\"database\\\" :tech \\\"amazon S3\\\"))\\n    )\\n\\n    (def-system (\\\"third party ad network\\\" :desc \\\"advert network\\\"))\\n\\n### Actors\\n\\nTop level element, represents a human using the software.\\n\\nExamples:\\n\\n    (define-actor (\\\"customer\\\")\\n      ;; optional edges to other parts of the architecture\\n      )\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-actor ((name) &body children))\\n\\n### Systems\\n\\nTop level element, represents a logical software system.\\n\\nExamples:\\n\\n    (define-system (\\\"name of the system\\\" :description \\\"optional description\\\" \\n                                         :tech \\\"optional technology\\\")\\n      ;; optional children of this system; edges or containers\\n      )\\n    (def-system (\\\"name of the system\\\" :desc \\\"can abbreviate a little; :desc vs :description, def-system vs define-system\\\"))\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-system ((name) &key description tech &body children))\\n\\n### Containers\\n\\nContainers are independently deployable pieces of a system. They should be used as children of a `def-system`\\n\\nExamples:\\n\\n    (def-system (\\\"dog ratr\\\")\\n      (def-container (\\\"frontend\\\" :tech \\\"...\\\" :desc \\\"...\\\")\\n        ;; optional children of this system; edges or components\\n      )\\n    )\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-container ((name) &key description tech &body children))\\n\\n### Components\\n\\nComponents are pieces of one deployable part of a system. These could be things\\nlike java packages, C# assemblies, ES6 modules, etc. They should be used as\\nchildren of a `def-container`\\n\\nExamples:\\n\\n    (def-system (\\\"dog ratr\\\")\\n      (def-container (\\\"frontend\\\")\\n        (def-component (\\\"upload page\\\" :tech \\\"...\\\" :desc \\\"...\\\"))\\n        (def-component (\\\"dog browser\\\")\\n          ;; optional children, edges\\n        )\\n      )\\n    )\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-component ((name) &key description tech &body children))\\n\\n### Edges\\n\\nEdges represent connections between the different elements in a software\\narchitecture. These have a few different options for how to connect things.\\nConnections are specified using something like a file path to unambiguously\\nidentify the destination of an edge.\\n\\nThey can be used as children of `def-actor`, `def-system`, `def-container`, and\\n`def-component`.\\n\\nYou can customize the direction of the edge using the `:direction` (`:dir` for\\nshort) option. The valid options are:\\n\\n* `push` - (default), indicates this node is reaching out to the target. Draws\\n  an arrow from the current node to the target.\\n* `pull` - indicates this node is pulling from the target, e.g. as a subscriber.\\n  Draws an arrow from the target to the current node.\\n* `both` - indicates bidrectional flow of actions/information. Draws an arrow to\\n  and from the target to the current node.\\n\\nExamples:\\n\\n    (def-actor (\\\"customer\\\")\\n      ;; connect this actor to the dog ratr system, and describe\\n      ;; how the actor uses the system\\n      (edge :to \\\"dog ratr\\\" :desc \\\"clicks a lot of links and ads\\\"))\\n\\n    (def-system (\\\"dog ratr\\\")\\n      (def-container (\\\"frontend\\\")\\n        ;; connect the frontend to the backend, with a relative path\\n        (edge :to \\\"./backend\\\" :desc \\\"fetch list of dogs\\\" :dir \\\"both\\\")\\n        ;; can specify a \\\"full\\\" path to connect with nodes that aren't\\n        ;; on the top level\\n        (edge :to \\\"ad server/click tracker\\\" :desc \\\"records a click via HTTP\\\")\\n      )\\n      (def-container (\\\"backend\\\"))\\n    )\\n\\n    (def-system (\\\"ad server\\\")\\n      (def-container (\\\"click tracker\\\")))\\n\\nIf this were a real lisp function, it's definition would look like:\\n\\n    (defun edge (&key to description (direction \\\"both\\\")))\\n\\n### Comments\\n\\nComments are of questionable use since they don't show up in the diagrams at\\nall, but they are useful for commenting out code while you're still hasing out\\nthe architecture.\\n\\nAny content after two colons is ignored as a comment.\\n\\nExamples:\\n\\n    ;; this whole line is a comment\\n    (def-system (\\\"dog ratr\\\")) ;; this bit is ignored, too\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/help/help.md\n// module id = 440\n// module chunks = 1","module.exports = \"(title \\\"c4-lab\\\")\\n;; add an actor to represent humans that use your system\\n(define-actor (\\\"Devs\\\")\\n  ;; add edges to say what part of your system the actor uses\\n  (edge\\n   ;; specify where the other end of this edge is using something like a path\\n   ;; \\\"C4 Lab/UI\\\" points at the \\\"C4 Lab\\\" system, the the \\\"UI\\\" container inside\\n   :to \\\"C4 Lab/UI\\\"\\n   :description \\\"Create/read/update designs\\\")\\n  )\\n;; add your system\\n(define-system (\\\"C4 Lab\\\"\\n                :description \\\"Web-based rapid prototyping of C4 diagrams to augment whiteboards\\\")\\n  ;; add the containers inside your system\\n  (def-container (\\\"UI\\\" :tech \\\"html5, angularjs\\\"\\n                       :description \\\"prototype, import, export C4 diagrams\\\" ))\\n  )\\n(define-system (\\\"Github\\\" :description \\\"Free git and web hosting\\\")\\n  ;; add edges between any actor, system, or container\\n  (edge :description \\\"hosts\\\" :to \\\"C4 Lab/UI\\\")\\n  (edge :to \\\"Travis-ci\\\" :description \\\"triggers build\\\")\\n  )\\n(define-system (\\\"Travis-ci\\\" :description \\\"Open source CI\\\")\\n  (edge :to \\\"Github\\\" :description \\\"publishes\\\"))\\n;; any line that starts with \\\";;\\\" is a comment\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/shell/c4lab.sexp\n// module id = 441\n// module chunks = 1","export { parse, SyntaxError, ParseError } from './parse'\nexport { uriEncode, uriDecode, toSvg } from './codegen'\nexport { DataStore } from './DataStore'\nexport { Exporter, formats } from './exporter'\nexport { toDot } from './dot-writer'\n\n\n// WEBPACK FOOTER //\n// ./src/core/index.js"],"sourceRoot":""}