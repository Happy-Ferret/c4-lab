webpackJsonp([1],{121:function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}Object.defineProperty(exports,"__esModule",{value:!0});var _angular=__webpack_require__(38),_angular2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_angular),_nav=__webpack_require__(230),nav=_interopRequireWildcard(_nav),_about=__webpack_require__(150),about=_interopRequireWildcard(_about);exports.default=_angular2.default.module("c4-lab.header",["ui.bootstrap","ui.router"]).component(nav.name,nav.options).component(about.name,about.options).name},122:function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}Object.defineProperty(exports,"__esModule",{value:!0});var _angular=__webpack_require__(38),angular=_interopRequireWildcard(_angular);__webpack_require__(119),__webpack_require__(120);var _viewer=__webpack_require__(234),viewer=_interopRequireWildcard(_viewer);exports.default=angular.module("c4-lab.viewer",["ui.bootstrap","ui.router"]).component(viewer.name,viewer.options).name},150:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.options=exports.name=void 0;var _about=__webpack_require__(427),_about2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_about);exports.name="c4LabAboutModal",exports.options={template:_about2.default,bindings:{close:"&"}}},151:function(module,exports,__webpack_require__){"use strict";function toDataUrl(img,createElement){var canvas=createElement("canvas");canvas.width=img.width,canvas.height=img.height;var context=canvas.getContext("2d");if(context){context.drawImage(img,0,0);return canvas.toDataURL("image/png")}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.toPngDataUri=exports.uriDecode=exports.uriEncode=exports.toSvg=void 0;var _lzString=__webpack_require__(434),lz=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(_lzString),_viz=__webpack_require__(444),_viz2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_viz),toSvg=exports.toSvg=function(dot){return(0,_viz2.default)(dot,{format:"svg",engine:"dot"})};exports.uriEncode=function(text){return lz.compressToEncodedURIComponent(text)},exports.uriDecode=function(uriData){return lz.decompressFromEncodedURIComponent(uriData)},exports.toPngDataUri=function(dot,createElement){var svg=toSvg(dot),img=createElement("img");return new Promise(function(resolve){img.onload=function(){return resolve(toDataUrl(img,createElement))},img.setAttribute("src","data:image/svg+xml,"+encodeURIComponent(svg))})}},184:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.options=exports.name=void 0;var _template=__webpack_require__(425),_template2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_template),BuildInfoController=function BuildInfoController(){_classCallCheck(this,BuildInfoController),this.version="0.32.1",this.build="90",this.hash="fe5615195fb1893ddc53635933e059327328f937"};exports.name="c4LabBuildInfo",exports.options={template:_template2.default,controller:BuildInfoController}},185:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _editor=__webpack_require__(228);Object.keys(_editor).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _editor[key]}})})},186:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _angular=__webpack_require__(38),angular=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(_angular),_help=__webpack_require__(429),_help2=_interopRequireDefault(_help),_help3=__webpack_require__(440),_help4=_interopRequireDefault(_help3);__webpack_require__(213);var HelpController=function HelpController(){_classCallCheck(this,HelpController),this.content=_help4.default};exports.default=angular.module("c4-lab.help",["hc.marked"]).component("c4LabHelp",{template:_help2.default,controller:HelpController}).name},187:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}Object.defineProperty(exports,"__esModule",{value:!0});var _angular=__webpack_require__(38),angular=_interopRequireWildcard(_angular),_preview=__webpack_require__(232),previewComponent=_interopRequireWildcard(_preview),_header=__webpack_require__(121),_header2=_interopRequireDefault(_header),_viewer=__webpack_require__(122),_viewer2=_interopRequireDefault(_viewer);exports.default=angular.module("c4-lab.preview",[_header2.default,_viewer2.default]).component(previewComponent.name,previewComponent.options).name},188:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function configureRoutes($stateProvider,$urlRouterProvider){"ngInject";$urlRouterProvider.otherwise("/"),$stateProvider.state("home",{url:"/?zoom",template:'<c4-lab-app zoom="vm.zoom"/>',controller:StateParamMirrorController,controllerAs:"vm"}).state("load",{url:"/load/{data}?zoom",template:'<c4-lab-preview encoded-text="vm.data" zoom="vm.zoom" />',controller:StateParamMirrorController,controllerAs:"vm"}).state("help",{url:"/help",template:"<c4-lab-help />"})}Object.defineProperty(exports,"__esModule",{value:!0});var StateParamMirrorController=function StateParamMirrorController($stateParams){"ngInject";_classCallCheck(this,StateParamMirrorController),Object.assign(this,$stateParams)};exports.default=configureRoutes},189:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _app=__webpack_require__(233);Object.keys(_app).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _app[key]}})})},225:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.toDot=exports.DotContext=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_wordwrap=__webpack_require__(446),_wordwrap2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_wordwrap),_lodash=__webpack_require__(181),typeShapeMap={actor:"egg",container:"box3d",component:"component"},DotContext=exports.DotContext=function(){function DotContext(hrefTo){_classCallCheck(this,DotContext),this.indent="",this.lines=[],this.wordwrap=(0,_wordwrap2.default)(30),this.hrefTo=hrefTo}return _createClass(DotContext,[{key:"load",value:function(graph,zoomNodeId){var _this=this;this.graph=graph,this.zoomNodeId=zoomNodeId,this.visibleIds=zoomNodeId?this.findVisibleNodes(zoomNodeId):graph.roots,this.visibleIds.sort(),this.visibleEdges=graph.edges.filter(function(x){return _this.isEdgeVisible(x)})}},{key:"findVisibleNodes",value:function(zoomNodeId){this.rootNode=this.graph.idMap[zoomNodeId];var parent=this.graph.idMap[this.rootNode.parentId],visibleIds=this.rootNode.children.concat(parent?parent.children:[]).map(function(x){return x.id}).concat(this.graph.roots).concat([this.rootNode.id,this.rootNode.parentId]).filter(function(x){return x});return(0,_lodash.uniq)(visibleIds)}},{key:"toDotId",value:function(nodeOrId){var id=(0,_lodash.isString)(nodeOrId)?nodeOrId:nodeOrId.id;return"g"+this.visibleIds.indexOf(id)}},{key:"toDescription",value:function(nodeOrText){var htmlNewlines=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],text=(0,_lodash.isString)(nodeOrText)?nodeOrText:nodeOrText.description;if(!text)return"";var wrapped=this.wordwrap(text);return htmlNewlines?wrapped.replace(/\n/g,"<br/>\n"):wrapped}},{key:"toLabel",value:function(edgeOrText){return this.toDescription(edgeOrText,!1).replace(/"/g,'\\"').replace(/\n/g,"\\n")}},{key:"isEdgeVisible",value:function(edge){return this.isIdVisible(edge.sourceId)||this.isIdVisible(edge.destinationId)||this.isCrossingSystems(edge)}},{key:"isCrossingSystems",value:function(edge){var visibleSourceIds=this.findVisibleIds(edge.sourceParentIds),visibleDestinationIds=this.findVisibleIds(edge.destinationParentIds);return visibleSourceIds[0]!==visibleDestinationIds[0]}},{key:"findVisibleIds",value:function(ids){var _this2=this;return ids.filter(function(x){return _this2.isIdVisible(x)})}},{key:"isIdVisible",value:function(id){return this.visibleIds.includes(id)}},{key:"drawCluster",value:function(indent,rootNode){var style=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rounded",dotId=this.toDotId(rootNode),label=this.toLabel(rootNode.name),nonClustered=this.graph.roots.filter(function(x){return x!==rootNode.id}).filter(function(x){return x!==rootNode.parentId});return[indent+"subgraph cluster_"+dotId+" {\n"+indent+"  label=<"+DOT.b(label)+'> style="'+style+'"',"",indent+"  "+dotId+' [style="invisible"]',"",this.drawItems(rootNode.children,indent+"  "),indent+"}",rootNode.parentId?[]:this.drawItems(nonClustered,indent)]}},{key:"drawChildCluster",value:function(indent){var _this3=this,parent=this.graph.idMap[this.rootNode.parentId],dotId=this.toDotId(parent),label=this.toLabel(parent.name),nonClustered=this.graph.roots.filter(function(x){return x!==parent.id}),otherChildren=parent.children.filter(function(x){return x!==_this3.rootNode}),nextIndent=indent+"  ";return[indent+"subgraph cluster_"+dotId+" {",nextIndent+"label=<"+DOT.b(label)+'> style="rounded"',"",""+nextIndent+dotId+' [style="invisible"]',this.drawItems(otherChildren,nextIndent),"",this.drawCluster(nextIndent,this.rootNode,"solid"),indent+"}",this.drawItems(nonClustered,indent)]}},{key:"draw",value:function(){var _this4=this,lines=["digraph g {"].concat([].concat(_toConsumableArray(this.digraphHeaders("  ")))).concat([this.rootNode&&this.rootNode.parentId?this.drawChildCluster("  "):this.rootNode?this.drawCluster("  ",this.rootNode):this.drawItems(this.visibleIds,"  "),"",this.visibleEdges.map(function(x){return _this4.drawEdge(x,"  ")}),"}",""]);return(0,_lodash.flattenDeep)(lines).join("\n")}},{key:"digraphHeaders",value:regeneratorRuntime.mark(function digraphHeaders(indent){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,indent+"compound=true";case 2:if(!this.graph.title){_context.next=9;break}return _context.next=5,indent+'label="'+this.toLabel(this.graph.title)+'"';case 5:return _context.next=7,indent+"fontsize=20";case 7:return _context.next=9,indent+"labelloc=t";case 9:return _context.next=11,indent+"node[fontsize=12]";case 11:return _context.next=13,indent+"edge[fontsize=12]";case 13:return _context.next=15,"";case 15:case"end":return _context.stop()}},digraphHeaders,this)})},{key:"toTechDescription",value:function(text){return text?(text=this.toDescription(text),"\n<br/>\n"+(text=DOT.font("#666666",DOT.i("&#171;"+text+"&#187;")))+"\n<br/>"):""}},{key:"drawItems",value:function(nodesOrIds,indent){var _this5=this;return nodesOrIds.map(function(x){return(0,_lodash.isString)(x)?_this5.graph.idMap[x]:x}).filter(function(x){return"edge"!==x.type}).map(function(x){return _this5.drawItem(x,indent)})}},{key:"drawItem",value:function(node,indent){var dotId=this.toDotId(node),tech=this.toTechDescription(node.tech),desc=node.description?"\n<br/>\n"+this.toDescription(node):"",shape=typeShapeMap[node.type]||"box",attrs={shape:shape},name=DOT.b(node.name);return this.hrefTo&&node.children&&node.children.some(function(x){return"edge"!==x.type})&&(attrs.href=this.hrefTo(node.id),attrs.tooltip="See more details about "+node.name,name=DOT.font("blue",DOT.u(name))),attrs.label="<\n"+name+tech+desc+"\n"+indent+">",""+indent+dotId+" "+DOT.attrList(attrs)}},{key:"drawEdge",value:function(edge,indent){var _this6=this,srcOk=this.isIdVisible(edge.sourceId),dstOk=this.isIdVisible(edge.destinationId),getId=function(idOk,id,parentIds){return idOk?id:parentIds.find(function(x){return _this6.isIdVisible(x)})},srcId=getId(srcOk,edge.sourceId,edge.sourceParentIds),dstId=getId(dstOk,edge.destinationId,edge.destinationParentIds),src=this.toDotId(srcId),dst=this.toDotId(dstId),attrs={};return edge.description&&(attrs.label=this.toLabel(edge)),srcOk&&dstOk||(attrs.style="dashed"),srcId===this.zoomNodeId&&(attrs.ltail="cluster_"+src),dstId===this.zoomNodeId&&(attrs.lhead="cluster_"+dst),attrs.dir=this.getEdgeDirection(edge.direction),""+indent+src+" -> "+dst+" "+DOT.attrList(attrs)}},{key:"getEdgeDirection",value:function(direction){switch(direction){case"both":return"both";case"pull":return"back";default:return null}}}]),DotContext}(),DOT=function(){function DOT(){_classCallCheck(this,DOT)}return _createClass(DOT,null,[{key:"i",value:function(text){return"<i>"+text+"</i>"}},{key:"b",value:function(text){return"<b>"+text+"</b>"}},{key:"u",value:function(text){return"<u>"+text+"</u>"}},{key:"font",value:function(color,text){return'<font color="'+color+'">'+text+"</font>"}},{key:"attrList",value:function(attrs){return"["+Reflect.ownKeys(attrs).filter(function(x){return attrs[x]}).map(function(x){return x+"="+DOT.quoteAttr(attrs[x])}).join(" ")+"]"}},{key:"quoteAttr",value:function(value){return/^</.test(value)?value:'"'+value+'"'}}]),DOT}();exports.toDot=function(graph,zoomNodeId,hrefTo){var ctx=new DotContext(hrefTo);return ctx.load(graph,zoomNodeId),ctx.draw()}},226:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Exporter=exports.formats=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_codegen=__webpack_require__(151),Exporter=(exports.formats="sexp dot png".split(" "),function(){function Exporter(document){_classCallCheck(this,Exporter),this.createElement=function(e){return document.createElement(e)}}return _createClass(Exporter,[{key:"export",value:function(format,title,text,dot){this[format](title||"c4-lab-graph",text,dot)}},{key:"sexp",value:function(title,text){this.downloadFile(title+".sexp",text,"text/plain")}},{key:"dot",value:function(title,text,_dot){this.downloadFile(title+".dot",_dot,"text/plain")}},{key:"png",value:function(title,text,dot){var _this=this;(0,_codegen.toPngDataUri)(dot,this.createElement).then(function(dataUri){return _this.downloadFile(title+".png",dataUri)})}},{key:"downloadFile",value:function(filename,content){var contentType=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.createElement("a");a.download=filename,a.href=contentType?"data:"+contentType+","+encodeURIComponent(content):content,a.click()}}]),Exporter}());exports.Exporter=Exporter},227:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toArray(arr){return Array.isArray(arr)?arr:Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function canonicalize(key){return keywordAliases.filter(function(_ref){return _ref.from.test(key)}).map(function(_ref2){return _ref2.to})[0]||key}function parseKeywordArgs(kwargs){var allowed=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/.*/;if(0===kwargs.length)return{};var _kwargs=_toArray(kwargs),keyword=_kwargs[0],value=_kwargs[1],rest=_kwargs.slice(2),key=canonicalize(keyword);return Object.assign(allowed.test(key)?_defineProperty({},key,value.toString()):{},parseKeywordArgs(rest,allowed))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=exports.InvalidDirectionError=exports.NameNotFoundError=exports.OptsNotFoundError=exports.TitleNotAtTopLevelError=exports.TitleNotAStringError=exports.ParseError=exports.SyntaxError=exports.pathToId=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_sExpression=__webpack_require__(443),_sExpression2=_interopRequireDefault(_sExpression),_md=__webpack_require__(436),_md2=_interopRequireDefault(_md),_lodash=__webpack_require__(181),_path=__webpack_require__(438),path=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(_path),pathToId=exports.pathToId=_md2.default,stripComments=function(text){return text.replace(/^\s*;;.*$/gm,"")},ParseError=(exports.SyntaxError=_sExpression2.default.SyntaxError,exports.ParseError=function(_extendableBuiltin2){function ParseError(){return _classCallCheck(this,ParseError),_possibleConstructorReturn(this,(ParseError.__proto__||Object.getPrototypeOf(ParseError)).apply(this,arguments))}return _inherits(ParseError,_extendableBuiltin2),ParseError}(function(cls){function ExtendableBuiltin(){var instance=Reflect.construct(cls,Array.from(arguments));return Object.setPrototypeOf(instance,Object.getPrototypeOf(this)),instance}return ExtendableBuiltin.prototype=Object.create(cls.prototype,{constructor:{value:cls,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(ExtendableBuiltin,cls):ExtendableBuiltin.__proto__=cls,ExtendableBuiltin}(Error))),TitleNotAStringError=exports.TitleNotAStringError=function(_ParseError){function TitleNotAStringError(input){return _classCallCheck(this,TitleNotAStringError),_possibleConstructorReturn(this,(TitleNotAStringError.__proto__||Object.getPrototypeOf(TitleNotAStringError)).call(this,"title must be a string, was: "+JSON.stringify(input)))}return _inherits(TitleNotAStringError,_ParseError),TitleNotAStringError}(ParseError),TitleNotAtTopLevelError=exports.TitleNotAtTopLevelError=function(_ParseError2){function TitleNotAtTopLevelError(){return _classCallCheck(this,TitleNotAtTopLevelError),_possibleConstructorReturn(this,(TitleNotAtTopLevelError.__proto__||Object.getPrototypeOf(TitleNotAtTopLevelError)).call(this,"title is only allowed at the top level"))}return _inherits(TitleNotAtTopLevelError,_ParseError2),TitleNotAtTopLevelError}(ParseError),OptsNotFoundError=exports.OptsNotFoundError=function(_ParseError3){function OptsNotFoundError(type){return _classCallCheck(this,OptsNotFoundError),_possibleConstructorReturn(this,(OptsNotFoundError.__proto__||Object.getPrototypeOf(OptsNotFoundError)).call(this,"missing options for a "+type))}return _inherits(OptsNotFoundError,_ParseError3),OptsNotFoundError}(ParseError),NameNotFoundError=exports.NameNotFoundError=function(_ParseError4){function NameNotFoundError(type){return _classCallCheck(this,NameNotFoundError),_possibleConstructorReturn(this,(NameNotFoundError.__proto__||Object.getPrototypeOf(NameNotFoundError)).call(this,"missing a name for a "+type))}return _inherits(NameNotFoundError,_ParseError4),NameNotFoundError}(ParseError),InvalidDirectionError=exports.InvalidDirectionError=function(_ParseError5){function InvalidDirectionError(dir){return _classCallCheck(this,InvalidDirectionError),_possibleConstructorReturn(this,(InvalidDirectionError.__proto__||Object.getPrototypeOf(InvalidDirectionError)).call(this,'Unknown edge direction "'+dir+'". valid options are "push", "pull", or "both"'))}return _inherits(InvalidDirectionError,_ParseError5),InvalidDirectionError}(ParseError),keywordAliases=[{from:/^:desc.*/i,to:"description"},{from:/^:to/i,to:"to"},{from:/^:tech/i,to:"tech"},{from:/^:dir.*/i,to:"direction"}],Parser=function(){function Parser(){_classCallCheck(this,Parser),this.idMap={},this.pathMap={},this.edges=[],this.items=[]}return _createClass(Parser,[{key:"parse",value:function(text){var tokens=(0,_sExpression2.default)("("+stripComments(text)+")");if(tokens instanceof _sExpression2.default.SyntaxError)throw tokens;this.buildIR(tokens);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.edges[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var e=_step.value;this.postProcessEdge(e)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return{title:this.graphTitle,edges:this.edges,items:this.items,roots:this.items.filter(function(x){return!x.parentId}).map(function(x){return x.id}),idMap:this.idMap,pathMap:this.pathMap}}},{key:"buildIR",value:function(tokens,parent){var _this7=this;return tokens.map(function(x){return _this7.buildIRNode(x,parent)})}},{key:"buildIRNode",value:function(_ref4,parent){var _ref5=_toArray(_ref4),type=_ref5[0],rest=_ref5.slice(1);type=type.replace(/^def(ine)?-/i,"");var node=type in this?this[type](rest,parent):this.item(rest,parent,type);if(node)return/system|container/i.test(type)&&node.children.some(function(x){return"edge"!==x.type})&&(node.canExpand=!0),Object.assign(node,{type:type.toLowerCase()})}},{key:"item",value:function(_ref6,parent,type){var _ref7=_toArray(_ref6),opts=_ref7[0],children=_ref7.slice(1);if(!opts)throw new OptsNotFoundError(type);var _opts=_toArray(opts),name=_opts[0],kwargs=_opts.slice(1);if(!name)throw new NameNotFoundError(type);var path=this.pathToNode(name,parent).toString(),node={name:name.toString(),id:pathToId(path),path:path};return parent&&(node.parentId=parent.id),this.idMap[node.id]=node,this.pathMap[node.path]=node.id,Object.assign(node,parseKeywordArgs(kwargs,/description|tech/)),this.items.push(node),node.children=this.buildIR(children,node),node}},{key:"edge",value:function(input,parent){var edge=Object.assign({sourceId:parent.id},parseKeywordArgs(input,/description|to|tech|direction/));return this.edges.push(edge),edge}},{key:"title",value:function(_ref8,parent){var _ref9=_slicedToArray(_ref8,1),input=_ref9[0];if(!(0,_lodash.isString)(input))throw new TitleNotAStringError(input);if(parent)throw new TitleNotAtTopLevelError;this.graphTitle=input.toString()}},{key:"pathToNode",value:function(name,parent){return parent?this.idMap[parent.id].path+"/"+name:name}},{key:"postProcessEdge",value:function(edge){if(edge.to.startsWith(".")){var src=this.idMap[edge.sourceId],parent=this.idMap[src.parentId];edge.to=path.join(parent.path,edge.to)}if(edge.destinationId=this.pathMap[edge.to],!edge.destinationId)throw new ParseError("Could not find node '"+edge.to+"'");if(edge.sourceId===edge.destinationId)throw new ParseError("Edge cannot be both from and to '"+edge.to+"'");if(edge.direction){if(!/^(push|pull|both)$/i.test(edge.direction))throw new InvalidDirectionError(edge.direction);edge.direction=edge.direction.toLowerCase()}edge.id=pathToId(edge.sourceId+edge.destinationId),edge.sourceParentIds=this.findParentIds(edge.sourceId),edge.destinationParentIds=this.findParentIds(edge.destinationId)}},{key:"findParentIds",value:function(id){var node=this.idMap[id];return node.parentId?[node.parentId].concat(this.findParentIds(node.parentId)):[]}}]),Parser}();exports.parse=function(text){return(new Parser).parse(text)}},228:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function install($window,$log){$log.debug("installing codemirror"),$window.CodeMirror=_codemirror2.default}Object.defineProperty(exports,"__esModule",{value:!0}),exports.options=exports.name=exports.EditorController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.install=install,__webpack_require__(238),__webpack_require__(237),__webpack_require__(236),__webpack_require__(421),__webpack_require__(422);var _codemirror=__webpack_require__(72),_codemirror2=_interopRequireDefault(_codemirror),_editor=__webpack_require__(426),_editor2=_interopRequireDefault(_editor),_core=__webpack_require__(61);__webpack_require__(423);var EditorController=exports.EditorController=function(){function EditorController($log){"ngInject";_classCallCheck(this,EditorController),this.log=$log,this.editorOptions={lineNumbers:!0,mode:"commonlisp",theme:"elegant",matchBrackets:!0,autoCloseBrackets:!0}}return _createClass(EditorController,[{key:"$onInit",value:function(){this.parse(this.initialText)}},{key:"parse",value:function(text){this.lastError=void 0,this.text=text;try{var parsed=(0,_core.parse)(text);this.ngModel.$setViewValue(parsed),this.syntaxIsValid=!0,this.tryOnParse(text)}catch(e){this.log.error(e),(e instanceof _core.SyntaxError||e instanceof _core.ParseError)&&(this.syntaxIsValid=!1,this.lastError=e)}}},{key:"tryOnParse",value:function(text){if(this.onParse)try{this.onParse({text:text})}catch(e){this.log.error("Trouble firing onParse event",e)}}}]),EditorController}();exports.name="c4LabEditor",exports.options={require:{ngModel:"^"},template:_editor2.default,controller:EditorController,bindings:{initialText:"<",onParse:"&"}}},229:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.readAllText=function(file){var reader=new FileReader;return new Promise(function(resolve,reject){reader.onload=function(loadEvt){return resolve(loadEvt.target.result)},reader.onerror=reject,reader.readAsText(file)})}},230:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.options=exports.name=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_nav=__webpack_require__(428),_nav2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_nav);__webpack_require__(424);var _core=__webpack_require__(61),_importer=__webpack_require__(229),_about=__webpack_require__(150),aboutComponent=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(_about),NavController=function(){function NavController($state,$uibModal,$window){"ngInject";_classCallCheck(this,NavController),this.$state=$state,this.$uibModal=$uibModal,this.storage=new _core.DataStore($window.localStorage),this.exportFormats=_core.formats}return _createClass(NavController,[{key:"href",value:function(){return this.$state.href("load",{data:(0,_core.uriEncode)(this.text),zoom:this.zoom})}},{key:"export",value:function(format){this.onExport({format:format})}},{key:"import",value:function(files){var _this=this;files&&(0,_importer.readAllText)(files[0]).then(function(text){return _this._onImport(text)})}},{key:"openAbout",value:function(){this.$uibModal.open({component:aboutComponent.name})}},{key:"_onImport",value:function(text){this.storage.save(text),this.$state.go("home",{},{reload:!0})}}]),NavController}();exports.name="c4LabNav",exports.options={template:_nav2.default,controller:NavController,bindings:{text:"<",onExport:"&",zoom:"<"}}},231:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function allowBlobsAndDataHrefs($compileProvider){$compileProvider.aHrefSanitizationWhitelist(/^(https?|ftp|mailto|blob|data):/i)}var _angular=__webpack_require__(38),angular=_interopRequireWildcard(_angular);__webpack_require__(190),__webpack_require__(183),__webpack_require__(119),__webpack_require__(120),__webpack_require__(182),__webpack_require__(191);var _editor=__webpack_require__(185),editor=_interopRequireWildcard(_editor),_header=__webpack_require__(121),_header2=_interopRequireDefault(_header),_shell=__webpack_require__(189),shell=_interopRequireWildcard(_shell),_buildInfo=__webpack_require__(184),buildInfo=_interopRequireWildcard(_buildInfo),_routes=__webpack_require__(188),_routes2=_interopRequireDefault(_routes),_preview=__webpack_require__(187),_preview2=_interopRequireDefault(_preview),_viewer=__webpack_require__(122),_viewer2=_interopRequireDefault(_viewer),_help=__webpack_require__(186),_help2=_interopRequireDefault(_help);angular.module("c4-lab",["ui.codemirror","ui.bootstrap","ui.router","ngAnimate","ngFileUpload",_header2.default,_preview2.default,_viewer2.default,_help2.default]).component(buildInfo.name,buildInfo.options).component(editor.name,editor.options).component(shell.name,shell.options).run(editor.install).config(allowBlobsAndDataHrefs).config(_routes2.default)},232:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.options=exports.name=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_preview=__webpack_require__(430),_preview2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_preview),_core=__webpack_require__(61),PreviewComponent=function(){function PreviewComponent($window,$state){_classCallCheck(this,PreviewComponent),this.exporter=new _core.Exporter($window.document),this.storage=new _core.DataStore($window.localStorage),this.$state=$state}return _createClass(PreviewComponent,[{key:"$onChanges",value:function(){this.text=(0,_core.uriDecode)(this.encodedText),this.graph=(0,_core.parse)(this.text)}},{key:"onExport",value:function(format){this.exporter.export(format,this.graph.title,this.text,this.dot)}},{key:"edit",value:function(){this.storage.save(this.text),this.$state.go("home")}}]),PreviewComponent}();exports.name="c4LabPreview",exports.options={template:_preview2.default,controller:PreviewComponent,bindings:{zoom:"<",encodedText:"<"}}},233:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.options=exports.name=exports.AppController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_core=__webpack_require__(61),_app=__webpack_require__(431),_app2=_interopRequireDefault(_app),_c4lab=__webpack_require__(441),_c4lab2=_interopRequireDefault(_c4lab),AppController=exports.AppController=function(){function AppController($log,$window){"ngInject";_classCallCheck(this,AppController),this.log=$log,this.$window=$window,this.storage=new _core.DataStore($window.localStorage),this.exporter=new _core.Exporter($window.document),this.codeExpanded=!0}return _createClass(AppController,[{key:"$onInit",value:function(){this.initialText=this.storage.load()||_c4lab2.default}},{key:"onParse",value:function(text){this.log.debug("onParse"),this.text=text,this.storage.save(text)}},{key:"onExport",value:function(format){this.exporter.export(format,this.graph.title,this.text,this.dot)}}]),AppController}();exports.name="c4LabApp",exports.options={template:_app2.default,controller:AppController,bindings:{zoom:"<"}}},234:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.options=exports.name=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_viewer=__webpack_require__(432),_viewer2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_viewer),_core=__webpack_require__(61),ViewerComponent=function(){function ViewerComponent($log,$sce,$state){"ngInject";_classCallCheck(this,ViewerComponent),this.$log=$log,this.$state=$state,this.toSvg=function(dot){return $sce.trustAsHtml((0,_core.toSvg)(dot))}}return _createClass(ViewerComponent,[{key:"$onChanges",value:function(diffs){diffs.graph&&this._onGraphChanged()}},{key:"onZoom",value:function(){var _nextState2=this._nextState(),_nextState3=_slicedToArray(_nextState2,2),name=_nextState3[0],params=_nextState3[1];return this.$state.go(name,params)}},{key:"_onGraphChanged",value:function(){var _this=this;this.$log.debug("redrawing"),this._recalculateExpandableNodes(),this.dot=(0,_core.toDot)(this.graph,this.zoom,function(x){return _this._hrefTo(x)}),this.svg=this.toSvg(this.dot),this.ngModel.$setViewValue(this.dot)}},{key:"_nextState",value:function(){var zoom=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.zoom;return[this.$state.current.name,Object.assign({},this.$state.params,{zoom:zoom})]}},{key:"_hrefTo",value:function(zoom){var _nextState4=this._nextState(zoom),_nextState5=_slicedToArray(_nextState4,2),name=_nextState5[0],params=_nextState5[1];return this.$state.href(name,params)}},{key:"_recalculateExpandableNodes",value:function(){this.expandableNodes=this.graph.items.filter(function(x){return x.canExpand}).sort(function(x){return x.path})}}]),ViewerComponent}();exports.name="c4LabViewer",exports.options={require:{ngModel:"^"},transclude:!0,template:_viewer2.default,controller:ViewerComponent,bindings:{zoom:"<",graph:"<"}}},235:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.DataStore=function(){function DataStore(localStorage){_classCallCheck(this,DataStore),this.localStorage=localStorage}return _createClass(DataStore,[{key:"load",value:function(){return this.localStorage.getItem("C4-LAB-ACTIVE-DOC-VNEXT")}},{key:"save",value:function(text){this.localStorage.setItem("C4-LAB-ACTIVE-DOC-VNEXT",text)}}]),DataStore}()},423:function(module,exports){},424:function(module,exports){},425:function(module,exports){module.exports='<span class="text-muted small" title="{{$ctrl.hash}}">\n  v{{$ctrl.version}}+{{$ctrl.build}}\n</span>\n'},426:function(module,exports){module.exports='<div ng-class="{\'bg-success\': $ctrl.syntaxIsValid, \'bg-danger\': !$ctrl.syntaxIsValid}" style="padding: 0 1em;">\n    <ui-codemirror\n        ui-codemirror-opts="$ctrl.editorOptions"\n        ng-model="$ctrl.text"\n        ng-model-options="{ debounce: 500 }"\n        ng-change="$ctrl.parse($ctrl.text)">\n    </ui-codemirror>\n    <span class="help-block">{{ $ctrl.lastError.message }}</span>\n</div>'},427:function(module,exports){module.exports='<div class="modal-header">\n    <h3 class="modal-title" id="modal-title">About</h3>\n</div>\n<div class="modal-body" id="modal-body">\n    <p>C4 Lab helps to create diagrams expressing a software architecture using a small lisp-like language, and share those\n        diagrams as images or text.\n    </p>\n    <p>\n        This is a based on <a href="http://www.simonbrown.je/">Simon Brown</a>\'s <a href="http://www.codingthearchitecture.com/2014/08/24/c4_model_poster.html">C4</a>        approach: Context, Containers, Components, and Classes. See <a href="https://leanpub.com/visualising-software-architecture">Visualising Software Architecture</a>        for more information.\n    </p>\n    <p>\n        If you have any feedback or problems, please open a <a href="https://github.com/ryepup/c4-lab/issues">issue on github</a>.\n    </p>\n    <c4-lab-build-info></c4-lab-build-info>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" type="button" ng-click="$ctrl.close()">Close</button>\n</div>'},428:function(module,exports){module.exports='<nav class="navbar navbar-default">\n    <div class="container-fluid">\n        <div class="navbar-header">\n            <a class="navbar-brand" href="#">C4 Lab</a>\n        </div>\n\n        <p class="navbar-text navbar-right c4lab-build">\n            <c4-lab-build-info></c4-lab-build-info>\n        </p>\n\n        <div class="navbar-collapse collapse">\n            <ul class="nav navbar-nav">\n                <li>\n                    <a popover-placement="bottom" uib-popover-template="\'_share.html\'">\n                        <span class="glyphicon glyphicon-duplicate"> </span> Share\n                    </a>\n                </li>\n                <li>\n                    <a ngf-select="$ctrl.import($files)" ngf-pattern="\'.sexp\'" ngf-accept="\'.sexp\'">\n                        <span class="glyphicon glyphicon-open-file"> </span> Import\n                    </a>\n                </li>\n                <li class="dropdown" uib-dropdown>\n                    <a uib-dropdown-toggle>\n                        <span class="glyphicon glyphicon-picture"> </span> Export <span class="caret"></span>\n                    </a>\n                    <ul class="dropdown-menu" uib-dropdown-menu>\n                        <li ng-repeat="format in $ctrl.exportFormats">\n                            <a ng-click="$ctrl.export(format)">{{format}}</a>\n                        </li>\n                    </ul>\n                </li>\n                <li>\n                    <a href="#" ng-click="$ctrl.openAbout()">\n                        <span class="glyphicon glyphicon-info-sign"> </span> About\n                    </a>\n                </li>\n                <li>\n                    <a ui-sref="help">\n                        <span class="glyphicon glyphicon-question-sign"> </span> Help\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</nav>\n\n<script type="text/ng-template" id="_share.html">\n    <div style="width:10em;">\n        <a ng-href="{{$ctrl.href()}}" target="_blank">\n            <span class="glyphicon glyphicon-new-window" > </span>\n            Link to this page</a>\n    </div>\n<\/script>'},429:function(module,exports){module.exports='<c4-lab-nav></c4-lab-nav>\n<div marked="$ctrl.content"></div>'},430:function(module,exports){module.exports='<c4-lab-nav text="$ctrl.text" on-export="$ctrl.onExport(format)" zoom="$ctrl.zoom"></c4-lab-nav>\n<c4-lab-viewer graph="$ctrl.graph" zoom="$ctrl.zoom" ng-model="$ctrl.dot">\n    <button type="button" class="btn btn-primary hidden-xs hidden-sm" ng-click="$ctrl.edit()">Start editing this graph</button>\n</c4-lab-viewer>'},431:function(module,exports){module.exports='<c4-lab-nav text="$ctrl.text" on-export="$ctrl.onExport(format)" zoom="$ctrl.zoom"></c4-lab-nav>\n<div class="container-fluid">\n    <div class="row">\n        <div ng-class="$ctrl.codeExpanded ? \'col-md-6\' : \'col-md-4\'">\n            <c4-lab-editor ng-model="$ctrl.graph" initial-text="$ctrl.initialText" on-parse="$ctrl.onParse(text)"></c4-lab-editor>\n\n            <button class="btn btn-default btn-block" type="button" ng-click="$ctrl.codeExpanded = !$ctrl.codeExpanded">\n                <span class="glyphicon"\n                    ng-class="$ctrl.codeExpanded ? \'glyphicon-chevron-left\' : \'glyphicon-chevron-right\'"></span> \n                    Show {{$ctrl.codeExpanded ? \'less\' : \'more\'}} code\n            </button>\n        </div>\n        <div ng-class="$ctrl.codeExpanded ? \'col-md-6\' : \'col-md-8\'">\n            <c4-lab-viewer graph="$ctrl.graph" zoom="$ctrl.zoom" ng-model="$ctrl.dot">\n            </c4-lab-viewer>\n        </div>\n    </div>\n</div>'},432:function(module,exports){module.exports='<div>\n    <form class="form-inline">\n        <div class="form-group">\n            <label for="zoomableNodes">Zoom to node</label>\n            <select name="zoomableNodes" class="form-control" ng-model="$ctrl.zoom" ng-change="$ctrl.onZoom()">\n                <option ng-value="undefined">--none--</option>\n                <option ng-repeat="node in $ctrl.expandableNodes track by node.id"\n                    value="{{node.id}}">{{node.path}}</option>\n            </select>\n        </div>\n        <div class="form-group" ng-transclude>\n        </div>\n    </form>\n    <uib-tabset>\n        <uib-tab heading="svg">\n            <div ng-bind-html="$ctrl.svg"></div>\'\n        </uib-tab>\n        <uib-tab heading="dot">\n            <p>This is for debugging purposes</p>\n            \x3c!-- TODO: a disabled text area --\x3e\n            <pre>{{$ctrl.dot}}</pre>\n        </uib-tab>\n    </uib-tabset>\n    <div>'},440:function(module,exports){module.exports='# C4-Lab Help\n\nC4-Lab defines a domain specific language (DSL) for creating software\narchitectures, modeled heavily after [Simon Brown][SB]\'s [C4][] approach\n(Context, Containers, Components, and Classes). See [Visualising Software\nArchitecture][] for more information.\n\n[SB]: http://www.simonbrown.je/\n[C4]: http://www.codingthearchitecture.com/2014/08/24/c4_model_poster.html\n[Visualising Software Architecture]: https://leanpub.com/visualising-software-architecture\n\n## Features\n\nC4-Lab has import, export, and "share" features accessible in the top\nnavigation, and saves work-in-progress in your browser.  If you want to save a\ngraph for later editing, export the `sexp` format, or save the "share" link.\nOther exports do not allow resuming editing.\n\n## Syntax\n\nThe DSL uses [s-expression][]s to represent the hierarchy and connections\nbetween actors, systems, containers, and components. If you squint your eyes, it\nlooks like common lisp or scheme macros.\n\nWe use the excellent [CodeMirror][] in-browser editor to add syntax highlighting\nand some help with managing the parentheses.\n\n[CodeMirror]: https://codemirror.net/\n[s-expression]: https://en.wikipedia.org/wiki/S-expression\n\n### Full example\n\nHere\'s a small bit of software archicture for a web application, demonstrating\nsome of the syntax.\n\n    (define-actor ("customer")\n      (edge :to "dog rater" :description "views/votes/uploads dog pictures"))\n\n    (define-system ("dog rater" :desc "fun clickbait website")\n\n      (def-container ("frontend" :tech "typescript, reactjs")\n        (edge :to "./database" :desc "display sweet dog pictures" \n              :direction "both")\n        )\n\n      (def-container ("backend" :tech "golang")\n        (def-component ("ad provider")\n          (edge :to "third party ad network" :desc "fetch user-specific ads")\n          )\n        )\n\n      (def-container ("database" :tech "amazon S3"))\n    )\n\n    (def-system ("third party ad network" :desc "advert network"))\n\n### Actors\n\nTop level element, represents a human using the software.\n\nExamples:\n\n    (define-actor ("customer")\n      ;; optional edges to other parts of the architecture\n      )\n\nIf this were a real lisp macro, it\'s definition would look like:\n\n    (defmacro define-actor ((name) &body children))\n\n### Systems\n\nTop level element, represents a logical software system.\n\nExamples:\n\n    (define-system ("name of the system" :description "optional description" \n                                         :tech "optional technology")\n      ;; optional children of this system; edges or containers\n      )\n    (def-system ("name of the system" :desc "can abbreviate a little; :desc vs :description, def-system vs define-system"))\n\nIf this were a real lisp macro, it\'s definition would look like:\n\n    (defmacro define-system ((name) &key description tech &body children))\n\n### Containers\n\nContainers are independently deployable pieces of a system. They should be used as children of a `def-system`\n\nExamples:\n\n    (def-system ("dog ratr")\n      (def-container ("frontend" :tech "..." :desc "...")\n        ;; optional children of this system; edges or components\n      )\n    )\n\nIf this were a real lisp macro, it\'s definition would look like:\n\n    (defmacro define-container ((name) &key description tech &body children))\n\n### Components\n\nComponents are pieces of one deployable part of a system. These could be things\nlike java packages, C# assemblies, ES6 modules, etc. They should be used as\nchildren of a `def-container`\n\nExamples:\n\n    (def-system ("dog ratr")\n      (def-container ("frontend")\n        (def-component ("upload page" :tech "..." :desc "..."))\n        (def-component ("dog browser")\n          ;; optional children, edges\n        )\n      )\n    )\n\nIf this were a real lisp macro, it\'s definition would look like:\n\n    (defmacro define-component ((name) &key description tech &body children))\n\n### Edges\n\nEdges represent connections between the different elements in a software\narchitecture. These have a few different options for how to connect things.\nConnections are specified using something like a file path to unambiguously\nidentify the destination of an edge.\n\nThey can be used as children of `def-actor`, `def-system`, `def-container`, and\n`def-component`.\n\nYou can customize the direction of the edge using the `:direction` (`:dir` for\nshort) option. The valid options are:\n\n* `push` - (default), indicates this node is reaching out to the target. Draws\n  an arrow from the current node to the target.\n* `pull` - indicates this node is pulling from the target, e.g. as a subscriber.\n  Draws an arrow from the target to the current node.\n* `both` - indicates bidrectional flow of actions/information. Draws an arrow to\n  and from the target to the current node.\n\nExamples:\n\n    (def-actor ("customer")\n      ;; connect this actor to the dog ratr system, and describe\n      ;; how the actor uses the system\n      (edge :to "dog ratr" :desc "clicks a lot of links and ads"))\n\n    (def-system ("dog ratr")\n      (def-container ("frontend")\n        ;; connect the frontend to the backend, with a relative path\n        (edge :to "./backend" :desc "fetch list of dogs" :dir "both")\n        ;; can specify a "full" path to connect with nodes that aren\'t\n        ;; on the top level\n        (edge :to "ad server/click tracker" :desc "records a click via HTTP")\n      )\n      (def-container ("backend"))\n    )\n\n    (def-system ("ad server")\n      (def-container ("click tracker")))\n\nIf this were a real lisp function, it\'s definition would look like:\n\n    (defun edge (&key to description (direction "both")))\n\n### Comments\n\nComments are of questionable use since they don\'t show up in the diagrams at\nall, but they are useful for commenting out code while you\'re still hasing out\nthe architecture.\n\nAny content after two colons is ignored as a comment.\n\nExamples:\n\n    ;; this whole line is a comment\n    (def-system ("dog ratr")) ;; this bit is ignored, too\n'},441:function(module,exports){module.exports='(title "c4-lab")\n;; add an actor to represent humans that use your system\n(define-actor ("Devs")\n  ;; add edges to say what part of your system the actor uses\n  (edge\n   ;; specify where the other end of this edge is using something like a path\n   ;; "C4 Lab/UI" points at the "C4 Lab" system, the the "UI" container inside\n   :to "C4 Lab/UI"\n   :description "Create/read/update designs")\n  )\n;; add your system\n(define-system ("C4 Lab"\n                :description "Web-based rapid prototyping of C4 diagrams to augment whiteboards")\n  ;; add the containers inside your system\n  (def-container ("UI" :tech "html5, angularjs"\n                       :description "prototype, import, export C4 diagrams" ))\n  )\n(define-system ("Github" :description "Free git and web hosting")\n  ;; add edges between any actor, system, or container\n  (edge :description "hosts" :to "C4 Lab/UI")\n  (edge :to "Travis-ci" :description "triggers build")\n  )\n(define-system ("Travis-ci" :description "Open source CI")\n  (edge :to "Github" :description "publishes"))\n;; any line that starts with ";;" is a comment\n'},61:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _parse=__webpack_require__(227);Object.defineProperty(exports,"parse",{enumerable:!0,get:function(){return _parse.parse}}),Object.defineProperty(exports,"SyntaxError",{enumerable:!0,get:function(){return _parse.SyntaxError}}),Object.defineProperty(exports,"ParseError",{enumerable:!0,get:function(){return _parse.ParseError}});var _codegen=__webpack_require__(151);Object.defineProperty(exports,"uriEncode",{enumerable:!0,get:function(){return _codegen.uriEncode}}),Object.defineProperty(exports,"uriDecode",{enumerable:!0,get:function(){return _codegen.uriDecode}}),Object.defineProperty(exports,"toSvg",{enumerable:!0,get:function(){return _codegen.toSvg}});var _DataStore=__webpack_require__(235);Object.defineProperty(exports,"DataStore",{enumerable:!0,get:function(){return _DataStore.DataStore}});var _exporter=__webpack_require__(226);Object.defineProperty(exports,"Exporter",{enumerable:!0,get:function(){return _exporter.Exporter}}),Object.defineProperty(exports,"formats",{enumerable:!0,get:function(){return _exporter.formats}});var _dotWriter=__webpack_require__(225);Object.defineProperty(exports,"toDot",{enumerable:!0,get:function(){return _dotWriter.toDot}})}},[231]);
//# sourceMappingURL=main.d6d0fbfe7a2c0e85db0e.js.map